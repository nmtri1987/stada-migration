(function(){function t(n){return ViewUtilities.Paging.InstanceHtml(n)}function i(){SP.SOD.executeOrDelayUntilScriptLoaded(function(){n.Locale=Strings.STS.L_CurrentUICulture_Name;SP.SOD.registerSod(n.ListResourceFileName,"/_layouts/15/ScriptResx.ashx?name="+n.ListResourceFileName+"&culture="+STSHtmlEncode(Strings.STS.L_CurrentUICulture_Name));SP.SOD.executeFunc(n.ListResourceFileName,"Res",r)},"strings.js");var t=_spPageContextInfo.webAbsoluteUrl+"/_vti_bin/Services/Department/DepartmentService.svc/GetDepartments/"+_spPageContextInfo.currentUICultureName+"/"+_rbvhContext.EmployeeInfo.FactoryLocation.LookupId;$.ajax({url:t,method:"GET",async:!0,headers:{Accept:"application/json; odata=verbose"},success:function(t){t&&t.length>0&&$("#"+n.Container+" .department-locale").each(function(){var n=$(this).attr("data-id"),i=$(this);$(t).each(function(t,r){r.Id.toString()===n&&i.text(r.DepartmentName)})})},error:function(){status="failed"}})}function r(){$("#viewDetailTH_freightApproval").text(Res.freightManagement_ViewDetail);$("#requesterTH_freightApproval").text(Res.freightManagement_Requester);$("#departmentTH_freightApproval").text(Res.overtime_Department);$("#bringerTH_freightApproval").text(Res.freightManagement_Bringer);$("#receiverTH_freightApproval").text(Res.freightManagement_Receiver);$("#requestNoTH_freightApproval").text(Res.freightManagement_RequestNumber);$("#createdTH_freightApproval").text(Res.createdDate);$("#approvalStatusTH_freightApproval").text(Res.freightManagement_ApprovalStatus);$("#"+n.Container+" .viewDetail").text(Res.freightManagement_ViewDetail);$(".label-success").text(Res.approvalStatus_Approved);$(".label-warning").text(Res.approvalStatus_Cancelled);$(".label-danger").text(Res.approvalStatus_Rejected);n.CompanyVehicle=Res.freightManagement_CompanyVehicle;$(".companyvehicle").text(n.CompanyVehicle)}function u(t){var s="<td>"+t.CurrentItem.Requester[0].lookupValue+"<\/td>",h='<td class="department-locale" data-id="'+t.CurrentItem.CommonDepartment[0].lookupId+'">'+t.CurrentItem.CommonDepartment[0].lookupValue+"<\/td>",f="<td><\/td>",e,i,u,o;f=t.CurrentItem.Bringer&&t.CurrentItem.Bringer[0].lookupId>0?"<td>"+t.CurrentItem.Bringer[0].lookupValue+"<\/td>":t.CurrentItem.BringerName&&t.CurrentItem.BringerName.length>0?"<td>"+t.CurrentItem.BringerName+"<\/td>":'<td class="companyvehicle">'+n.CompanyVehicle+"<\/td>";var c=t.CurrentItem.Receiver!=null?"<td>"+t.CurrentItem.Receiver+"<\/td>":"<td><\/td>",l="<td>"+t.CurrentItem.Created+"<\/td>",a=t.CurrentItem.CommonComment!=null?"<td>"+Functions.parseComment(t.CurrentItem.CommonComment)+"<\/td>":"<td><\/td>",r=window.location.href.split("#")[0];return r=Functions.removeParam("lang",r),r+="#tab2",r=encodeURIComponent(r),e='<td><a href="/SitePages/FreightRequest.aspx?subSection=FreightManagement&itemId='+t.CurrentItem.ID+"&Source="+r+'"   class="viewDetail" >View Detail<\/a><\/td>',i=t.CurrentItem.ApprovalStatus+"",i=i.toLowerCase(),u="",u=i=="approved"?'<td><span class="label label-success">Approved<\/span><\/td>':i=="cancelled"?'<td><span class="label label-warning">Cancelled<\/span><\/td>':i=="rejected"?'<td><span class="label label-danger">Rejected<\/span><\/td>':i&&i.length>0?'<td><span class="label label-default statusmultilang">'+t.CurrentItem.ApprovalStatus+"<\/span><\/td>":'<td><span class="label label-default">In-Progress<\/span><\/td>',o=t.CurrentItem.RequestNo!=null?"<td>"+t.CurrentItem.RequestNo+"<\/td>":"<td><\/td>","<tr>"+e+o+s+h+f+c+l+u+"<\/tr>"}var n={FreightManagement_ViewDetail:"View Detail",FreightManagement_Requester:"Requester",FreightManagement_Department:"Department",FreightManagement_Bringer:"Bringer",FreightManagement_Receiver:"Received by",FreightManagement_Created:"Created",FreightManagement_ApprovalStatus:"Approval status",FreightManagement_RequestNumber:"Request number",ListResourceFileName:"RBVHStadaLists",PageResourceFileName:"RBVHStadaWebpages",CompanyVehicle:"Company's Vehicle",Locale:"",Container:"freight-approval-container"};(function(){var r={};r.Templates={};r.Templates.Item=u;r.OnPreRender=function(){$(".ms-menutoolbar").hide()};r.ListTemplateType=10015;r.BaseViewID=3;r.OnPostRender=i;r.Templates.Header="<div class='col-md-12'><table class='table'><thead><tr><th id='viewDetailTH_freightApproval'>"+n.FreightManagement_ViewDetail+"<\/th><th id='requestNoTH_freightApproval'>"+n.FreightManagement_RequestNumber+"<\/th><th id='requesterTH_freightApproval'>"+n.FreightManagement_Requester+"<\/th><th id='departmentTH_freightApproval'>"+n.FreightManagement_Department+"<\/th><th id='bringerTH_freightApproval'>"+n.FreightManagement_Bringer+"<\/th><th id='receiverTH_freightApproval'>"+n.FreightManagement_Receiver+"<\/th><th id='createdTH_freightApproval'>"+n.FreightManagement_Created+"<\/th><th id='approvalStatusTH_freightApproval'>"+n.FreightManagement_ApprovalStatus+"<\/th><th><\/th><\/tr><\/thead><tbody>";r.Templates.Footer=t;SPClientTemplates.TemplateManager.RegisterTemplateOverrides(r)})()})(),function(){function t(n){return ViewUtilities.Paging.InstanceHtml(n)}function i(){SP.SOD.executeOrDelayUntilScriptLoaded(function(){n.Locale=Strings.STS.L_CurrentUICulture_Name;SP.SOD.registerSod(n.ListResourceFileName,"/_layouts/15/ScriptResx.ashx?name="+n.ListResourceFileName+"&culture="+STSHtmlEncode(Strings.STS.L_CurrentUICulture_Name));SP.SOD.executeFunc(n.ListResourceFileName,"Res",r)},"strings.js","sp.js","string.js");var t=_spPageContextInfo.webAbsoluteUrl+"/_vti_bin/Services/Department/DepartmentService.svc/GetDepartments/"+_spPageContextInfo.currentUICultureName+"/"+_rbvhContext.EmployeeInfo.FactoryLocation.LookupId;$.ajax({url:t,method:"GET",async:!0,headers:{Accept:"application/json; odata=verbose"},success:function(t){t&&t.length>0&&$("#"+n.Container+" .department-locale").each(function(){var n=$(this).attr("data-id"),i=$(this);$(t).each(function(t,r){r.Id.toString()===n&&i.text(r.DepartmentName)})})},error:function(){status="failed"}})}function r(){$("#viewDetailTH_freightDept").text(Res.freightManagement_ViewDetail);$("#requesterTH_freightDept").text(Res.freightManagement_Requester);$("#requestNoTH_freightDept").text(Res.freightManagement_RequestNumber);$("#departmentTH_freightDept").text(Res.overtime_Department);$("#bringerTH_freightDept").text(Res.freightManagement_Bringer);$("#receiverTH_freightDept").text(Res.freightManagement_Receiver);$("#createdTH_freightDept").text(Res.createdDate);$("#commentTH_freightDept").text(Res.commonComment);$("#isValid_freightDept").text(Res.freightList_IsValidRequest);$("#approvalStatusTH_freightDept").text(Res.freightManagement_ApprovalStatus);$("#vehicle_freightDept").text(Res.freightManagement_Vehicle);$("#"+n.Container+" .viewDetail").text(Res.freightManagement_ViewDetail);$(".label-success").text(Res.approvalStatus_Approved);$(".label-warning").text(Res.approvalStatus_Cancelled);$(".label-danger").text(Res.approvalStatus_Rejected);n.CompanyVehicle=Res.freightManagement_CompanyVehicle;$(".companyvehicle").text(n.CompanyVehicle)}function u(t){var c=_spPageContextInfo.currentLanguage,l="<td>"+t.CurrentItem.Requester[0].lookupValue+"<\/td>",a=t.CurrentItem.RequestNo!=null?"<td>"+t.CurrentItem.RequestNo+"<\/td>":"<td><\/td>",v='<td class="department-locale" data-id="'+t.CurrentItem.CommonDepartment[0].lookupId+'">'+t.CurrentItem.CommonDepartment[0].lookupValue+"<\/td>",o="<td><\/td>",s,i,f,u;o=t.CurrentItem.Bringer&&t.CurrentItem.Bringer[0].lookupId>0?"<td>"+t.CurrentItem.Bringer[0].lookupValue+"<\/td>":t.CurrentItem.BringerName&&t.CurrentItem.BringerName.length>0?"<td>"+t.CurrentItem.BringerName+"<\/td>":'<td class="companyvehicle">'+n.CompanyVehicle+"<\/td>";var y=t.CurrentItem.Receiver!=null?"<td>"+t.CurrentItem.Receiver+"<\/td>":"<td><\/td>",p="<td>"+t.CurrentItem.Created+"<\/td>",w=t.CurrentItem.CommonComment!=null?"<td>"+Functions.parseComment(t.CurrentItem.CommonComment)+"<\/td>":"<td><\/td>",r=window.location.href.split("#")[0];r=Functions.removeParam("lang",r);r+="#tab3";r=encodeURIComponent(r);s='<td><a href="/SitePages/FreightRequest.aspx?subSection=FreightManagement&itemId='+t.CurrentItem.ID+"&Source="+r+'"   class="viewDetail" >View Detail<\/a><\/td>';i=t.CurrentItem.ApprovalStatus+"";i=i.toLowerCase();f="";f=i=="approved"?'<td><span class="label label-success">Approved<\/span><\/td>':i=="cancelled"?'<td><span class="label label-warning">Cancelled<\/span><\/td>':i=="rejected"?'<td><span class="label label-danger">Rejected<\/span><\/td>':i&&i.length>0?'<td><span class="label label-default statusmultilang">'+t.CurrentItem.ApprovalStatus+"<\/span><\/td>":'<td><span class="label label-default">In-Progress<\/span><\/td>';u="";t.CurrentItem.VehicleLookup[0]&&(u=t.CurrentItem.VehicleLookup[0].lookupValue);c==1066&&(u=t.CurrentItem.VehicleVN!=null?t.CurrentItem.VehicleVN:"");var b="<td>"+u+"<\/td>",h="",e="";return t.CurrentItem["IsValidRequest.value"]&&t.CurrentItem["IsValidRequest.value"]==="1"?e="<td><span style='margin-left:25%; ' class='glyphicon glyphicon-ok'><\/td>":(e="<td><span style='margin-left:25%;' class='glyphicon glyphicon-remove'><\/td>",h="style='background-color: #fff7e6;'"),"<tr "+h+" >"+s+a+l+v+o+y+p+w+e+f+b+"<\/tr>"}var n={FreightManagement_ViewDetail:"View Detail",FreightManagement_Requester:"Requester",FreightManagement_Department:"Department",FreightManagement_Bringer:"Bringer",FreightManagement_Receiver:"Received by",FreightManagement_Created:"Created",FreightManagement_Comment:"Comment",FreightManagement_ApprovalStatus:"Approval status",FreightManagement_RequestNumber:"Request number",FreightManagement_Vehicle:"Vehicle",ApprovalStatus:"",ListResourceFileName:"RBVHStadaLists",PageResourceFileName:"RBVHStadaWebpages",CompanyVehicle:"Company's Vehicle",Locale:"",Container:"freight-bydepartment-container"};(function(){var r={};r.Templates={};r.Templates.Item=u;r.OnPreRender=function(){$(".ms-menutoolbar").hide()};r.ListTemplateType=10015;r.BaseViewID=4;r.OnPostRender=i;r.Templates.Header="<div class='col-md-12'><table class='table'><thead><tr><th id='viewDetailTH_freightDept'>"+n.FreightManagement_ViewDetail+"<\/th><th id='requestNoTH_freightDept'>"+n.FreightManagement_RequestNumber+"<\/th><th id='requesterTH_freightDept'>"+n.FreightManagement_Requester+"<\/th><th id='departmentTH_freightDept'>"+n.FreightManagement_Department+"<\/th><th id='bringerTH_freightDept'>"+n.FreightManagement_Bringer+"<\/th><th id='receiverTH_freightDept'>"+n.FreightManagement_Receiver+"<\/th><th id='createdTH_freightDept'>"+n.FreightManagement_Created+"<\/th><th id='commentTH_freightDept'>"+n.FreightManagement_Comment+"<\/th><th id='isValid_freightDept'>"+n.LeaveManagement_IsValid+"<\/th><th id='approvalStatusTH_freightDept'>"+n.FreightManagement_ApprovalStatus+"<\/th><th id='vehicle_freightDept' style='min-width:80px;'>"+n.FreightManagement_Vehicle+"<\/th><th><\/th><\/tr><\/thead><tbody>";r.Templates.Footer=t;SPClientTemplates.TemplateManager.RegisterTemplateOverrides(r)})()}(),function(){function t(){SP.SOD.executeOrDelayUntilScriptLoaded(function(){n.Locale=Strings.STS.L_CurrentUICulture_Name;SP.SOD.registerSod(n.ListResourceFileName,"/_layouts/15/ScriptResx.ashx?name="+n.ListResourceFileName+"&culture="+STSHtmlEncode(Strings.STS.L_CurrentUICulture_Name));SP.SOD.executeFunc(n.ListResourceFileName,"Res",i)},"strings.js")}function i(){$(".freight-request-cancel").click(function(){$(this).attr("disabled","true");var n=$(this).attr("data-id"),t=window.location.protocol+"//{0}/_vti_bin/services/Freightmanagement/Freightmanagementservice.svc/CancelFreight/{1}",t=RBVH.Stada.WebPages.Utilities.String.format(t,location.host,n);n&&$.ajax({type:"GET",url:t,contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){n.Code===6&&alert(n.Message);window.location.reload()},error:function(){console.log("Error while cancelling this request")}})});$("#freight-request-detail").text(Res.freightManagement_ViewDetail);$("#freight-request-requestNo").text(Res.freightManagement_RequestNumber);$("#freight-request-requester").text(Res.freightManagement_Requester);$("#freight-request-bringer").text(Res.freightManagement_Bringer);$("#freight-request-receiver").text(Res.freightManagement_Receiver);$("#freight-request-created").text(Res.createdDate);$("#freight-request-comment").text(Res.commonComment);$("#freight-request-status").text(Res.freightManagement_ApprovalStatus);$("#freight-request-isValid").text(Res.freightList_IsValidRequest);$("#"+n.Container+" .viewDetail").text(Res.freightManagement_ViewDetail);$(".label-success").text(Res.approvalStatus_Approved);$(".label-warning").text(Res.approvalStatus_Cancelled);$(".label-danger").text(Res.approvalStatus_Rejected);$(".freight-request-cancel").text(Res.freightManagement_CancelRequest);n.CompanyVehicle=Res.freightManagement_CompanyVehicle;$(".companyvehicle").text(n.CompanyVehicle)}function r(t){var a="<td>"+t.CurrentItem.Requester[0].lookupValue+"<\/td>",s="<td><\/td>",h,i,f,e,c,o,u,l;s=t.CurrentItem.Bringer&&t.CurrentItem.Bringer[0].lookupId>0?"<td>"+t.CurrentItem.Bringer[0].lookupValue+"<\/td>":t.CurrentItem.BringerName&&t.CurrentItem.BringerName.length>0?"<td>"+t.CurrentItem.BringerName+"<\/td>":'<td class="companyvehicle">'+n.CompanyVehicle+"<\/td>";var v=t.CurrentItem.Receiver!=null?"<td>"+t.CurrentItem.Receiver+"<\/td>":"<td><\/td>",y="<td>"+t.CurrentItem.Created+"<\/td>",p=t.CurrentItem.CommonComment!=null?"<td>"+Functions.parseComment(t.CurrentItem.CommonComment)+"<\/td>":"<td><\/td>",r=window.location.href.split("#")[0];return r=Functions.removeParam("lang",r),r+="#tab1",r=encodeURIComponent(r),h='<td><a href="/SitePages/FreightRequest.aspx?subSection=FreightManagement&itemId='+t.CurrentItem.ID+"&Source="+r+'"   class="viewDetail" >View Detail<\/a><\/td>',i=t.CurrentItem.ApprovalStatus+"",i=i.toLowerCase(),f="",e="",(t.CurrentItem.Editor[0].id!==t.CurrentItem.Author[0].id||t.CurrentItem.Editor[0].id===t.CurrentItem.Author[0].id&&i==="cancelled")&&(e="disabled"),c="<td><button type='button' class='btn btn-default btn-sm freight-request-cancel' "+e+" data-id='"+t.CurrentItem.ID+"'>Cancel Request<\/button><\/td>",f=i==="approved"?'<td><span class="label label-success">Approved<\/span><\/td>':i==="cancelled"?'<td><span class="label label-warning">Cancelled<\/span><\/td>':i==="rejected"?'<td><span class="label label-danger">Rejected<\/span><\/td>':i&&i.length>0?'<td><span class="label label-default statusmultilang">'+t.CurrentItem.ApprovalStatus+"<\/span><\/td>":'<td><span class="label label-default">In-Progress<\/span><\/td>',o="",u="",t.CurrentItem["IsValidRequest.value"]&&t.CurrentItem["IsValidRequest.value"]==="1"?u="<td><span style='margin-left:25%; ' class='glyphicon glyphicon-ok'><\/td>":(u="<td><span style='margin-left:25%;' class='glyphicon glyphicon-remove'><\/td>",o="style='background-color: #fff7e6;'"),l=t.CurrentItem.RequestNo!=null?"<td>"+t.CurrentItem.RequestNo+"<\/td>":"<td><\/td>","<tr "+o+" >"+h+l+a+s+v+y+p+f+u+c+"<\/tr>"}function u(n){return ViewUtilities.Paging.InstanceHtml(n)}var n={FreightManagement_ViewDetail:"View Detail",FreightManagement_Requester:"Requester",FreightManagement_Bringer:"Bringer",FreightManagement_Receiver:"Received by",FreightManagement_Created:"Created",FreightManagement_Comment:"Comment",FreightManagement_IsValid:"Is valid",FreightManagement_ApprovalStatus:"Approval status",FreightManagement_RequestNumber:"Request number",ListResourceFileName:"RBVHStadaLists",PageResourceFileName:"RBVHStadaWebpages",CompanyVehicle:"Company's Vehicle",Locale:"",Container:"freight-request-list-container"};(function(){var i={};i.Templates={};i.Templates.Item=r;i.OnPreRender=function(){$(".ms-menutoolbar").hide()};i.ListTemplateType=10015;i.BaseViewID=2;i.OnPostRender=t;i.Templates.Header="<div class='col-md-12'><table class='table'><thead><tr><th id='freight-request-detail'>"+n.FreightManagement_ViewDetail+"<\/th><th id='freight-request-requestNo'>"+n.FreightManagement_RequestNumber+"<\/th><th id='freight-request-requester'>"+n.FreightManagement_Requester+"<\/th><th id='freight-request-bringer'>"+n.FreightManagement_Bringer+"<\/th><th id='freight-request-receiver'>"+n.FreightManagement_Receiver+"<\/th><th id='freight-request-created'>"+n.FreightManagement_Created+"<\/th><th id='freight-request-comment'>"+n.FreightManagement_Comment+"<\/th><th id='freight-request-status'>"+n.FreightManagement_ApprovalStatus+"<\/th><th id='freight-request-isValid'>"+n.FreightManagement_IsValid+"<\/th><th id='freight-request-action'><\/th><th><\/th><\/tr><\/thead><tbody>";i.Templates.Footer=u;SPClientTemplates.TemplateManager.RegisterTemplateOverrides(i)})()}(),function(){function t(n){return ViewUtilities.Paging.InstanceHtml(n)}function i(){SP.SOD.executeOrDelayUntilScriptLoaded(function(){n.Locale=Strings.STS.L_CurrentUICulture_Name;SP.SOD.registerSod(n.ListResourceFileName,"/_layouts/15/ScriptResx.ashx?name="+n.ListResourceFileName+"&culture="+STSHtmlEncode(Strings.STS.L_CurrentUICulture_Name));SP.SOD.executeFunc(n.ListResourceFileName,"Res",r);SP.SOD.registerSod(n.PageResourceFileName,"/_layouts/15/ScriptResx.ashx?name="+n.PageResourceFileName+"&culture="+STSHtmlEncode(Strings.STS.L_CurrentUICulture_Name));SP.SOD.executeFunc(n.PageResourceFileName,"Res",u)},"strings.js");var t=_spPageContextInfo.webAbsoluteUrl+"/_vti_bin/Services/Department/DepartmentService.svc/GetDepartments/"+_spPageContextInfo.currentUICultureName+"/"+_rbvhContext.EmployeeInfo.FactoryLocation.LookupId;$.ajax({url:t,method:"GET",async:!0,headers:{Accept:"application/json; odata=verbose"},success:function(t){t&&t.length>0&&$("#"+n.Container+" .department-locale").each(function(){var n=$(this).attr("data-id"),i=$(this);$(t).each(function(t,r){r.Id.toString()===n&&i.text(r.DepartmentName)})})},error:function(){status="failed"}})}function r(){$("#viewDetailTH_freightSec").text(Res.freightManagement_ViewDetail);$("#requestNoTH_freightSec").text(Res.freightManagement_RequestNumber);$("#requesterTH_freightSec").text(Res.freightManagement_Requester);$("#departmentTH_freightSec").text(Res.overtime_Department);$("#bringerTH_freightSec").text(Res.freightManagement_Bringer);$("#receiverTH_freightSec").text(Res.freightManagement_Receiver);$("#createdTH_freightSec").text(Res.createdDate);$("#vehicle_freightSec").text(Res.freightManagement_Vehicle);n.ApprovalStatus_Cancelled=Res.approvalStatus_Cancelled;$("#"+n.Container+" .viewDetail").text(Res.freightManagement_ViewDetail);n.CompanyVehicle=Res.freightManagement_CompanyVehicle;$(".companyvehicle").text(n.CompanyVehicle)}function u(){n.ViewDetail=Res.viewDetail}function f(t){var l=t.CurrentItem.ID,o="<td>"+t.CurrentItem.Requester[0].lookupValue+"<\/td>",s='<td class="department-locale" data-id="'+t.CurrentItem.CommonDepartment[0].lookupId+'">'+t.CurrentItem.CommonDepartment[0].lookupValue+"<\/td>",u="<td><\/td>",i,f,e;u=t.CurrentItem.Bringer&&t.CurrentItem.Bringer[0].lookupId>0?"<td>"+t.CurrentItem.Bringer[0].lookupValue+"<\/td>":t.CurrentItem.BringerName&&t.CurrentItem.BringerName.length>0?"<td>"+t.CurrentItem.BringerName+"<\/td>":'<td class="companyvehicle">'+n.CompanyVehicle+"<\/td>";var h=t.CurrentItem.Receiver!=null?"<td>"+t.CurrentItem.Receiver+"<\/td>":"<td><\/td>",c="<td>"+t.CurrentItem.Created+"<\/td>",r="";return t.CurrentItem.CompanyVehicle&&t.CurrentItem["CompanyVehicle.value"]&&t.CurrentItem["CompanyVehicle.value"]==="1"&&(_spPageContextInfo.currentLanguage==1033?t.CurrentItem.VehicleLookup&&t.CurrentItem.VehicleLookup.length>0&&(r=t.CurrentItem.VehicleLookup[0].lookupValue):t.CurrentItem.VehicleVN&&t.CurrentItem.VehicleVN.length>0&&(r=t.CurrentItem.VehicleVN)),r="<td>"+r+"<\/td>",i=window.location.href.split("#")[0],i=Functions.removeParam("lang",i),i+="#tab4",i=encodeURIComponent(i),f='<td><a href="/SitePages/FreightRequest.aspx?subSection=FreightManagement&itemId='+t.CurrentItem.ID+"&Source="+i+'"   class="viewDetail" >View Detail<\/a><\/td>',e=t.CurrentItem.RequestNo!=null?"<td>"+t.CurrentItem.RequestNo+"<\/td>":"<td><\/td>","<tr>"+f+e+o+s+u+h+c+r+"<\/tr>"}var n={FreightManagement_ViewDetail:"View Detail",FreightManagement_Requester:"Requester",FreightManagement_Department:"Department",FreightManagement_Bringer:"Bringer",FreightManagement_Receiver:"Received by",FreightManagement_Created:"Created",FreightManagement_RequestNumber:"Request number",FreightManagement_Vehicle:"Vehicle",ListResourceFileName:"RBVHStadaLists",PageResourceFileName:"RBVHStadaWebpages",CompanyVehicle:"Company's Vehicle",Locale:"",Container:"freight-security-container"};(function(){var r={};r.Templates={};r.Templates.Item=f;r.OnPreRender=function(){$(".ms-menutoolbar").hide()};r.ListTemplateType=10015;r.BaseViewID=6;r.OnPostRender=i;r.Templates.Header="<div class='col-md-12'><table class='table'><thead><tr><th id='viewDetailTH_freightSec'>"+n.FreightManagement_ViewDetail+"<\/th><th id='requestNoTH_freightSec'>"+n.FreightManagement_RequestNumber+"<\/th><th id='requesterTH_freightSec'>"+n.FreightManagement_Requester+"<\/th><th id='departmentTH_freightSec'>"+n.FreightManagement_Department+"<\/th><th id='bringerTH_freightSec'>"+n.FreightManagement_Bringer+"<\/th><th id='receiverTH_freightSec'>"+n.FreightManagement_Receiver+"<\/th><th id='createdTH_freightSec'>"+n.FreightManagement_Created+"<\/th><th id='vehicle_freightSec' style='min-width:80px;'>"+n.FreightManagement_Vehicle+"<\/th><\/tr><\/thead><tbody>";r.Templates.Footer=t;SPClientTemplates.TemplateManager.RegisterTemplateOverrides(r)})()}(),function(){function t(n){return ViewUtilities.Paging.InstanceHtml(n)}function i(){SP.SOD.executeOrDelayUntilScriptLoaded(function(){n.Locale=Strings.STS.L_CurrentUICulture_Name;SP.SOD.registerSod(n.ListResourceFileName,"/_layouts/15/ScriptResx.ashx?name="+n.ListResourceFileName+"&culture="+STSHtmlEncode(Strings.STS.L_CurrentUICulture_Name));SP.SOD.executeFunc(n.ListResourceFileName,"Res",r);SP.SOD.registerSod(n.PageResourceFileName,"/_layouts/15/ScriptResx.ashx?name="+n.PageResourceFileName+"&culture="+STSHtmlEncode(Strings.STS.L_CurrentUICulture_Name));SP.SOD.executeFunc(n.PageResourceFileName,"Res",u);f()},"strings.js");var t=_spPageContextInfo.webAbsoluteUrl+"/_vti_bin/Services/Department/DepartmentService.svc/GetDepartments/"+_spPageContextInfo.currentUICultureName+"/"+_rbvhContext.EmployeeInfo.FactoryLocation.LookupId;$.ajax({url:t,method:"GET",async:!0,headers:{Accept:"application/json; odata=verbose"},success:function(t){t&&t.length>0&&$("#"+n.Container+" .department-locale").each(function(){var n=$(this).attr("data-id"),i=$(this);$(t).each(function(t,r){r.Id.toString()===n&&i.text(r.DepartmentName)})})},error:function(){status="failed"}})}function r(){$("#viewDetailTH_freightOperator").text(Res.freightManagement_ViewDetail);$("#requesterTH_freightOperator").text(Res.freightManagement_Requester);$("#requestNoTH_freightOperator").text(Res.freightManagement_RequestNumber);$("#departmentTH_freightOperator").text(Res.overtime_Department);$("#bringerTH_freightOperator").text(Res.freightManagement_Bringer);$("#receiverTH_freightOperator").text(Res.freightManagement_Receiver);$("#createdTH_freightOperator").text(Res.createdDate);$("#commentTH_freightOperator").text(Res.commonComment);$("#approvalStatusTH_freightOperator").text(Res.freightManagement_ApprovalStatus);$("#vehicle_freightOperator").text(Res.freightManagement_Vehicle);$("#"+n.Container+" .viewDetail").text(Res.freightManagement_ViewDetail);$(".label-success").text(Res.approvalStatus_Approved);$(".label-warning").text(Res.approvalStatus_Cancelled);$(".label-danger").text(Res.approvalStatus_Rejected);n.CompanyVehicle=Res.freightManagement_CompanyVehicle;$(".companyvehicle").text(n.CompanyVehicle)}function u(){n.FreightManagement_UpdateFreightSuccess=Res.freightManagement_UpdateVehicleSuccess}function f(){var n=$("td[name^='vehicleTd_']"),t,i;_rbvhContext&&_rbvhContext.EmployeeInfo&&(t=_spPageContextInfo.webAbsoluteUrl+"/_vti_bin/Services/FreightManagement/FreightManagementService.svc/GetVehicleOperatorInfo/"+_rbvhContext.EmployeeInfo.ID,i=$.ajax({url:t,method:"GET",async:!1,headers:{Accept:"application/json; odata=verbose"}}),i.done(function(t){var u,r;if(t){if(u=t.HasPermission,n&&n.length>0)for(r=0;r<n.length;r++){var i=n[r],h=$(i).attr("itemId"),c=$(i).attr("selectedVehicleId"),f=e(h,t.FreightVehicles,c);u==!0?($(i).append(f[0]),$(f[1]).insertAfter(i)):$(i).append(vehicleValue)}u==!0&&o()}s()},function(){console.log("Error")}))}function e(n,t,i){var e=_spPageContextInfo.currentLanguage,o="ddVehicle_"+n,c="button_"+n,u='<select style="width: 145px; display: inline;" name="'+o+'" selectedVehicleId="'+i+'" itemId="'+n+'">',s="None",r,f,h;if(s=e==1066?"Không có":"None",u+='<option vehiclevaluevn="" value="0" vehiclevalue="">'+s+"<\/option>",t&&t.length>0)for(r=0;r<t.length;r++)f=t[r].Vehicle,e==1066&&(f=t[r].VehicleVN),u+='<option vehicleLookupId="'+t[r].ID+'" vehiclevaluevn="'+t[r].VehicleVN+'" vehiclevalue="'+t[r].Vehicle+'" value="'+t[r].ID+'">'+f+"<\/option>";return u+="<\/select>",h='<td><button class="btn btn-primary update-Freight" style="display: inline; margin-left: 5px; font-size: smaller" name="'+c+'" ddName="'+o+'" type="button">OK<\/button><\/td>',[u,h]}function o(){var n=$("select[name^='ddVehicle_']"),t,i,r;if(n&&n.length>0)for(t=0;t<n.length;t++)i=n[t],r=$(i).attr("selectedVehicleId"),r&&$(i).val(r.trim()).change()}function s(){$(".update-Freight").on("click",function(){var c=$(this),f=c.attr("ddName"),e=$("select[name='"+f+"']").attr("itemId"),i=$("select[name='"+f+"'] option:selected"),o=i.attr("vehiclevaluevn"),s=i.attr("vehiclevalue"),r=i.attr("value"),h,t,u;e!=undefined&&o!=undefined&&s!=undefined&&(h=_spPageContextInfo.webAbsoluteUrl+"/_vti_bin/Services/FreightManagement/FreightManagementService.svc/UpdateFreightVehicle",t={},t.Id=parseInt(e),u=r>0&&r.length>0?parseInt(r):0,t.VehicleLookup={LookupId:parseInt(u),LookupValue:s},t.VehicleVN={LookupId:parseInt(u),LookupValue:o},$.ajax({url:h,method:"POST",async:!1,data:JSON.stringify(t),contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){t.Code==0&&alert(n.FreightManagement_UpdateFreightSuccess)},error:function(){console.log("Update vehicle failed")}}))})}function h(t){var h="<td>"+t.CurrentItem.Requester[0].lookupValue+"<\/td>",c=t.CurrentItem.RequestNo!=null?"<td>"+t.CurrentItem.RequestNo+"<\/td>":"<td><\/td>",l='<td class="department-locale" data-id="'+t.CurrentItem.CommonDepartment[0].lookupId+'">'+t.CurrentItem.CommonDepartment[0].lookupValue+"<\/td>",e="<td><\/td>",o,i,u,f,s;e=t.CurrentItem.Bringer&&t.CurrentItem.Bringer[0].lookupId>0?"<td>"+t.CurrentItem.Bringer[0].lookupValue+"<\/td>":t.CurrentItem.BringerName&&t.CurrentItem.BringerName.length>0?"<td>"+t.CurrentItem.BringerName+"<\/td>":'<td class="companyvehicle">'+n.CompanyVehicle+"<\/td>";var a=t.CurrentItem.Receiver!=null?"<td>"+t.CurrentItem.Receiver+"<\/td>":"<td><\/td>",v="<td>"+t.CurrentItem.Created+"<\/td>",y=t.CurrentItem.CommonComment!=null?"<td>"+Functions.parseComment(t.CurrentItem.CommonComment)+"<\/td>":"<td><\/td>",r=window.location.href.split("#")[0];return r=Functions.removeParam("lang",r),r+="#tab5",r=encodeURIComponent(r),o='<td><a href="/SitePages/FreightRequest.aspx?subSection=FreightManagement&itemId='+t.CurrentItem.ID+"&Source="+r+'"   class="viewDetail" >View Detail<\/a><\/td>',i=t.CurrentItem.ApprovalStatus+"",i=i.toLowerCase(),u="",u=i=="approved"?'<td><span class="label label-success">Approved<\/span><\/td>':i=="cancelled"?'<td><span class="label label-warning">Cancelled<\/span><\/td>':i=="rejected"?'<td><span class="label label-danger">Rejected<\/span><\/td>':i&&i.length>0?'<td><span class="label label-default statusmultilang">'+t.CurrentItem.ApprovalStatus+"<\/span><\/td>":'<td><span class="label label-default">In-Progress<\/span><\/td>',f="0",t.CurrentItem.VehicleLookup&&t.CurrentItem.VehicleLookup[0]&&(f=t.CurrentItem.VehicleLookup[0].lookupId),s='<td name="vehicleTd_'+t.CurrentItem.ID+'" itemId="'+t.CurrentItem.ID+'" selectedVehicleId="'+f+'" ><\/td>',"<tr>"+o+c+h+l+e+a+v+y+u+s+"<\/tr>"}var n={FreightManagement_ViewDetail:"View Detail",FreightManagement_Requester:"Requester",FreightManagement_Department:"Department",FreightManagement_Bringer:"Bringer",FreightManagement_Receiver:"Received by",FreightManagement_Created:"Created",FreightManagement_Comment:"Comment",FreightManagement_ApprovalStatus:"Approval status",FreightManagement_RequestNumber:"Request number",FreightManagement_Vehicle:"Vehicle",ListResourceFileName:"RBVHStadaLists",PageResourceFileName:"RBVHStadaWebpages",CompanyVehicle:"Company's Vehicle",Locale:"",FreightManagement_UpdateFreightSuccess:"Update vehicle successfully!",Container:"freight-vehicle-operator-container"};(function(){var r={};r.Templates={};r.Templates.Item=h;r.OnPreRender=function(){$(".ms-menutoolbar").hide()};r.ListTemplateType=10015;r.BaseViewID=7;r.OnPostRender=i;r.Templates.Header="<div class='col-md-12'><table class='table'><thead><tr><th id='viewDetailTH_freightOperator'>"+n.FreightManagement_ViewDetail+"<\/th><th id='requestNoTH_freightOperator'>"+n.FreightManagement_RequestNumber+"<\/th><th id='requesterTH_freightOperator'>"+n.FreightManagement_Requester+"<\/th><th id='departmentTH_freightOperator'>"+n.FreightManagement_Department+"<\/th><th id='bringerTH_freightOperator'>"+n.FreightManagement_Bringer+"<\/th><th id='receiverTH_freightOperator'>"+n.FreightManagement_Receiver+"<\/th><th id='createdTH_freightOperator'>"+n.FreightManagement_Created+"<\/th><th id='commentTH_freightOperator'>"+n.FreightManagement_Comment+"<\/th><th id='approvalStatusTH_freightOperator'>"+n.FreightManagement_ApprovalStatus+"<\/th><th id='vehicle_freightOperator' style='min-width:80px;'>"+n.FreightManagement_Vehicle+"<\/th><th><\/th><\/tr><\/thead><tbody>";r.Templates.Footer=t;SPClientTemplates.TemplateManager.RegisterTemplateOverrides(r)})()}(),function(){function t(){SP.SOD.executeOrDelayUntilScriptLoaded(function(){n.Locale=Strings.STS.L_CurrentUICulture_Name;SP.SOD.registerSod(n.ListResourceFileName,"/_layouts/15/ScriptResx.ashx?name="+n.ListResourceFileName+"&culture="+STSHtmlEncode(Strings.STS.L_CurrentUICulture_Name));SP.SOD.executeFunc(n.ListResourceFileName,"Res",i)},"strings.js")}function i(){$("#my-freight-detail").text(Res.freightManagement_ViewDetail);$("#my-freight-requester").text(Res.freightManagement_Requester);$("#my-freight-bringer").text(Res.freightManagement_Bringer);$("#my-freight-requesterno").text(Res.freightManagement_RequestNumber);$("#my-freight-receiver").text(Res.freightManagement_Receiver);$("#my-freight-created").text(Res.createdDate);$("#my-freight-comment").text(Res.commonComment);$("#my-freight-status").text(Res.freightManagement_ApprovalStatus);$("#"+n.Container+" .viewDetail").text(Res.freightManagement_ViewDetail);$(".label-success").text(Res.approvalStatus_Approved);$(".label-warning").text(Res.approvalStatus_Cancelled);$(".label-danger").text(Res.approvalStatus_Rejected);n.CompanyVehicle=Res.freightManagement_CompanyVehicle;$(".companyvehicle").text(n.CompanyVehicle)}function r(t){var s="<td>"+t.CurrentItem.Requester[0].lookupValue+"<\/td>",f="<td><\/td>",e,i,u,o;f=t.CurrentItem.Bringer&&t.CurrentItem.Bringer[0].lookupId>0?"<td>"+t.CurrentItem.Bringer[0].lookupValue+"<\/td>":t.CurrentItem.BringerName&&t.CurrentItem.BringerName.length>0?"<td>"+t.CurrentItem.BringerName+"<\/td>":'<td class="companyvehicle">'+n.CompanyVehicle+"<\/td>";var h=t.CurrentItem.Receiver!=null?"<td>"+t.CurrentItem.Receiver+"<\/td>":"<td><\/td>",c="<td>"+t.CurrentItem.Created+"<\/td>",l=t.CurrentItem.CommonComment!=null?"<td>"+Functions.parseComment(t.CurrentItem.CommonComment)+"<\/td>":"<td><\/td>",r=window.location.href.split("#")[0];return r=Functions.removeParam("lang",r),r+="#tab0",r=encodeURIComponent(r),e='<td><a href="/SitePages/FreightRequest.aspx?subSection=FreightManagement&itemId='+t.CurrentItem.ID+"&Source="+r+'"   class="viewDetail" >View Detail<\/a><\/td>',i=t.CurrentItem.ApprovalStatus+"",i=i.toLowerCase(),u="",u=i==="approved"?'<td><span class="label label-success">Approved<\/span><\/td>':i==="cancelled"?'<td><span class="label label-warning">Cancelled<\/span><\/td>':i==="rejected"?'<td><span class="label label-danger">Rejected<\/span><\/td>':i&&i.length>0?'<td><span class="label label-default statusmultilang">'+t.CurrentItem.ApprovalStatus+"<\/span><\/td>":'<td><span class="label label-default">In-Progress<\/span><\/td>',o=t.CurrentItem.RequestNo!=null?"<td>"+t.CurrentItem.RequestNo+"<\/td>":"<td><\/td>","<tr>"+e+o+s+f+h+c+l+u+"<\/tr>"}function u(n){return ViewUtilities.Paging.InstanceHtml(n)}var n={FreightManagement_ViewDetail:"View Detail",FreightManagement_Requester:"Requester",FreightManagement_Bringer:"Bringer",FreightManagement_Receiver:"Received by",FreightManagement_Created:"Created",FreightManagement_Comment:"Comment",FreightManagement_ApprovalStatus:"Approval status",FreightManagement_RequestNumber:"Request number",ListResourceFileName:"RBVHStadaLists",PageResourceFileName:"RBVHStadaWebpages",CompanyVehicle:"Company's Vehicle",Locale:"",Container:"my-freight-list-container"};(function(){var i={};i.Templates={};i.Templates.Item=r;i.OnPreRender=function(){$(".ms-menutoolbar").hide()};i.ListTemplateType=10015;i.BaseViewID=5;i.OnPostRender=t;i.Templates.Header="<div class='col-md-12'><table class='table'><thead><tr><th id='my-freight-detail'>"+n.FreightManagement_ViewDetail+"<\/th><th id='my-freight-requesterno'>"+n.FreightManagement_RequestNumber+"<\/th><th id='my-freight-requester'>"+n.FreightManagement_Requester+"<\/th><th id='my-freight-bringer'>"+n.FreightManagement_Bringer+"<\/th><th id='my-freight-receiver'>"+n.FreightManagement_Receiver+"<\/th><th id='my-freight-created'>"+n.FreightManagement_Created+"<\/th><th id='my-freight-comment'>"+n.FreightManagement_Comment+"<\/th><th id='my-freight-status'>"+n.FreightManagement_ApprovalStatus+"<\/th><th><\/th><\/tr><\/thead><tbody>";i.Templates.Footer=u;SPClientTemplates.TemplateManager.RegisterTemplateOverrides(i)})()}();