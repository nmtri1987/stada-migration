RBVH.Stada.javascript.common.NamespaceManager.register("RBVH.Stada.WebPages.pages");RBVH.Stada.WebPages.pages.LeaveHistory=function(n){var t=window.location.pathname;this.Settings={Id:n.Id,EmployeeId:0};$.extend(!0,this.Settings,n);this.Initialize()};RBVH.Stada.WebPages.pages.LeaveHistory.prototype={Initialize:function(){var n=this;$(document).ready(function(){SP.SOD.executeFunc("SP.js","SP.ClientContext",function(){n.InitControls();n.RegisterEvents()})})},InitControls:function(){var n=this,t,i,r,f;if($(n.Settings.FromDateControlSelector).datepicker({format:"dd/mm/yyyy",autoclose:!0}),$(n.Settings.ToDateControlSelector).datepicker({format:"dd/mm/yyyy",autoclose:!0}),t=RBVH.Stada.WebPages.Utilities.GetValueByParam("FromDate"),i=RBVH.Stada.WebPages.Utilities.GetValueByParam("ToDate"),!!t==!1||!!i==!1)n.RebindUrl(t,i,!1);else{if(n.Settings.FromDate=t,n.Settings.ToDate=i,r=Date.parse(t),r!==NaN){var u=new Date(r),o=u.getDate(),s=u.getMonth()+1,h=u.getFullYear();$(n.Settings.FromDateControlSelector).val(o+"/"+s+"/"+h)}if(f=Date.parse(i),f!==NaN){var e=new Date(f),c=e.getDate(),l=e.getMonth()+1,a=e.getFullYear();$(n.Settings.ToDateControlSelector).val(c+"/"+l+"/"+a)}}},RegisterEvents:function(){var n=this;$(n.Settings.FromDateControlSelector).on("changeDate",function(t){var i=t.date.getDate(),r=t.date.getMonth(),u=t.date.getYear()+1900,f=new Date(u,r,i);$(".datepicker").hide();n.RebindUrl(n.toISOStringTZ(f),n.Settings.ToDate,!0)});$(n.Settings.ToDateControlSelector).on("changeDate",function(t){var i=t.date.getDate(),r=t.date.getMonth(),u=t.date.getYear()+1900,f=new Date(u,r,i);$(".datepicker").hide();n.RebindUrl(n.Settings.FromDate,n.toISOStringTZ(f),!0)})},toISOStringTZ:function(n){var t=(new Date).getTimezoneOffset()*6e4;return new Date(n.getTime()-t).toISOString().slice(0,-1)},RebindUrl:function(n,t,i){var s=this,e=window.location.hash,r=window.location.href.split("#")[0],h=new Date,f=n,u,o;f=typeof f!="undefined"?f:s.toISOStringTZ(new Date);u=t;u=typeof u!="undefined"?u:s.toISOStringTZ(new Date(h.getFullYear(),h.getMonth()+1,0,23,59,59));o="";o=r.indexOf("?")>=0?"&":"?";r=r.indexOf("FromDate=")>0?r.replace(/(FromDate=)[^\&]+/,"$1"+f):r+o+"FromDate="+f;r=r.indexOf("ToDate=")>0?r.replace(/(ToDate=)[^\&]+/,"$1"+u):r+"&ToDate="+u;!i||(r=ViewUtilities.Paging.RemovePagingURL(r));e&&e.length>0&&(r+=e);window.location.href=r}};