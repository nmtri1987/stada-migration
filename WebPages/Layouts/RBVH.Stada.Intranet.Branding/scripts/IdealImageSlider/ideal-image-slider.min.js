var IdealImageSlider=function(){"use strict";var l=function(n,t){return n["r"+t]||n["webkitR"+t]||n["mozR"+t]||n["msR"+t]||function(n){setTimeout(n,1e3/60)}}(window,"equestAnimationFrame"),f=function(n,t){function r(){var f=(new Date).getTime(),e=f-u;e>=t?n.call():i.value=l(r)}var u=(new Date).getTime(),i={};return i.value=l(r),i},y=function(n,t){var i=Object.prototype.toString.call(t).slice(8,-1);return t!==undefined&&t!==null&&i===n},c=function(n){return Math.round(n)===n},a=function(n){var r,t,i;for(n=n||{},r=1;r<arguments.length;r++)if(t=arguments[r],t)for(i in t)t.hasOwnProperty(i)&&(y("Object",t[i])&&t[i]!==null?a(n[i],t[i]):n[i]=t[i]);return n},o=function(n,t){return t?n.classList?n.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(n.className):!1},n=function(n,t){t&&(n.classList?n.classList.add(t):n.className+=" "+t)},i=function(n,t){t&&(n.classList?n.classList.remove(t):n.className=n.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," "))},p=function(n){return Array.prototype.slice.call(n)},k=function(n,t,i){var r=n.slice((i||t)+1||n.length);return n.length=t<0?n.length+t:t,n.push.apply(n,r)},s=function(n,t,i){n!==null&&typeof n!="undefined"&&(n.addEventListener?n.addEventListener(t,i,!1):n.attachEvent?n.attachEvent("on"+t,i):n["on"+t]=i)},u=function(n,t){if(!n.style.backgroundImage){var i=new Image;i.setAttribute("src",n.getAttribute("data-src"));i.onload=function(){n.style.backgroundImage="url("+n.getAttribute("data-src")+")";n.setAttribute("data-actual-width",this.naturalWidth);n.setAttribute("data-actual-height",this.naturalHeight);typeof t=="function"&&t(this)}}},w=function(){return window.devicePixelRatio>1?!0:window.matchMedia&&window.matchMedia("(-webkit-min-device-pixel-ratio: 1.5),(min--moz-device-pixel-ratio: 1.5),(-o-min-device-pixel-ratio: 3/2),(min-resolution: 1.5dppx)").matches?!0:!1},r=function(n,t,i){n.style.webkitTransitionDuration=n.style.MozTransitionDuration=n.style.msTransitionDuration=n.style.OTransitionDuration=n.style.transitionDuration=i+"ms";n.style.webkitTransform=n.style.MozTransform=n.style.msTransform=n.style.OTransform="translateX("+t+"px)"},v=function(n){n.style.removeProperty("-webkit-transition-duration");n.style.removeProperty("transition-duration");n.style.removeProperty("-webkit-transform");n.style.removeProperty("-ms-transform");n.style.removeProperty("transform")},b=function(n){var t=n.time,r=+new Date+t,i=function(){var e=+new Date,u=r-e,f;if(u<60){n.run(1);return}f=1-u/t;n.run(f);l(i)};i()},h=function(n,t){var r,i,f,e,u;(typeof t=="undefined"&&(t=!0),c(n.settings.height))||(r=Math.round(n._attributes.container.offsetHeight),i=r,n._attributes.aspectWidth&&n._attributes.aspectHeight?i=n._attributes.aspectHeight/n._attributes.aspectWidth*n._attributes.container.offsetWidth:(f=n._attributes.currentSlide.getAttribute("data-actual-width"),e=n._attributes.currentSlide.getAttribute("data-actual-height"),f&&e&&(i=e/f*n._attributes.container.offsetWidth)),u=parseInt(n.settings.maxHeight,10),u&&i>u&&(i=u),i=Math.round(i),i!==r)&&(t?b({time:n.settings.transitionDuration,run:function(t){n._attributes.container.style.height=Math.round(t*(i-r)+r)+"px"}}):n._attributes.container.style.height=i+"px")},t={vars:{start:{},delta:{},isScrolling:undefined,direction:null},start:function(i){if(!o(this._attributes.container,this.settings.classes.animating)){var r=i.touches[0];t.vars.start={x:r.pageX,y:r.pageY,time:+new Date};t.vars.delta={};t.vars.isScrolling=undefined;t.vars.direction=null;this.stop();this.settings.beforeChange.apply(this);n(this._attributes.container,this.settings.classes.touching)}},move:function(n){if(!o(this._attributes.container,this.settings.classes.animating)&&!(n.touches.length>1)&&(!n.scale||n.scale===1)){var i=n.touches[0];t.vars.delta={x:i.pageX-t.vars.start.x,y:i.pageY-t.vars.start.y};typeof t.vars.isScrolling=="undefined"&&(t.vars.isScrolling=!!(t.vars.isScrolling||Math.abs(t.vars.delta.x)<Math.abs(t.vars.delta.y)));t.vars.isScrolling||(n.preventDefault(),r(this._attributes.previousSlide,t.vars.delta.x-this._attributes.previousSlide.offsetWidth,0),r(this._attributes.currentSlide,t.vars.delta.x,0),r(this._attributes.nextSlide,t.vars.delta.x+this._attributes.currentSlide.offsetWidth,0))}},end:function(){if(!o(this._attributes.container,this.settings.classes.animating)){var s=+new Date-t.vars.start.time,h=Number(s)<250&&Math.abs(t.vars.delta.x)>20||Math.abs(t.vars.delta.x)>this._attributes.currentSlide.offsetWidth/2,e=t.vars.delta.x<0?"next":"previous",u=this.settings.transitionDuration?this.settings.transitionDuration/2:0;t.vars.isScrolling||(h?(t.vars.direction=e,t.vars.direction=="next"?(r(this._attributes.currentSlide,-this._attributes.currentSlide.offsetWidth,u),r(this._attributes.nextSlide,0,u)):(r(this._attributes.previousSlide,0,u),r(this._attributes.currentSlide,this._attributes.currentSlide.offsetWidth,u)),f(t.transitionEnd.bind(this),u)):e=="next"?(r(this._attributes.currentSlide,0,u),r(this._attributes.nextSlide,this._attributes.currentSlide.offsetWidth,u)):(r(this._attributes.previousSlide,-this._attributes.previousSlide.offsetWidth,u),r(this._attributes.currentSlide,0,u)),u&&(n(this._attributes.container,this.settings.classes.animating),f(function(){i(this._attributes.container,this.settings.classes.animating)}.bind(this),u)))}},transitionEnd:function(){if(t.vars.direction){v(this._attributes.previousSlide);v(this._attributes.currentSlide);v(this._attributes.nextSlide);i(this._attributes.container,this.settings.classes.touching);i(this._attributes.previousSlide,this.settings.classes.previousSlide);i(this._attributes.currentSlide,this.settings.classes.currentSlide);i(this._attributes.nextSlide,this.settings.classes.nextSlide);this._attributes.currentSlide.setAttribute("aria-hidden","true");var r=this._attributes.slides,f=r.indexOf(this._attributes.currentSlide);t.vars.direction=="next"?(this._attributes.previousSlide=this._attributes.currentSlide,this._attributes.currentSlide=r[f+1],this._attributes.nextSlide=r[f+2],typeof this._attributes.currentSlide=="undefined"&&typeof this._attributes.nextSlide=="undefined"?(this._attributes.currentSlide=r[0],this._attributes.nextSlide=r[1]):typeof this._attributes.nextSlide=="undefined"&&(this._attributes.nextSlide=r[0]),u(this._attributes.nextSlide)):(this._attributes.nextSlide=this._attributes.currentSlide,this._attributes.previousSlide=r[f-2],this._attributes.currentSlide=r[f-1],typeof this._attributes.currentSlide=="undefined"&&typeof this._attributes.previousSlide=="undefined"?(this._attributes.currentSlide=r[r.length-1],this._attributes.previousSlide=r[r.length-2]):typeof this._attributes.previousSlide=="undefined"&&(this._attributes.previousSlide=r[r.length-1]),u(this._attributes.previousSlide));n(this._attributes.previousSlide,this.settings.classes.previousSlide);n(this._attributes.currentSlide,this.settings.classes.currentSlide);n(this._attributes.nextSlide,this.settings.classes.nextSlide);this._attributes.currentSlide.setAttribute("aria-hidden","false");h(this);this.settings.afterChange.apply(this)}}},e=function(i){var r,y,b,f,e,l,v;if(this.settings={selector:"",height:"auto",initialHeight:400,maxHeight:null,interval:4e3,transitionDuration:700,effect:"slide",disableNav:!1,keyboardNav:!0,previousNavSelector:"",nextNavSelector:"",classes:{container:"ideal-image-slider",slide:"iis-slide",previousSlide:"iis-previous-slide",currentSlide:"iis-current-slide",nextSlide:"iis-next-slide",previousNav:"iis-previous-nav",nextNav:"iis-next-nav",animating:"iis-is-animating",touchEnabled:"iis-touch-enabled",touching:"iis-is-touching",directionPrevious:"iis-direction-previous",directionNext:"iis-direction-next"},onInit:function(){},onStart:function(){},onStop:function(){},onDestroy:function(){},beforeChange:function(){},afterChange:function(){}},typeof i=="string"?this.settings.selector=i:typeof i=="object"&&a(this.settings,i),r=document.querySelector(this.settings.selector),!r)return null;if(y=p(r.children),b=[],r.innerHTML="",Array.prototype.forEach.call(y,function(t){var e;if(t instanceof HTMLImageElement||t instanceof HTMLAnchorElement){var i=document.createElement("a"),u="",f="";if(t instanceof HTMLAnchorElement)if(u=t.getAttribute("href"),f=t.getAttribute("target"),e=t.querySelector("img"),e!==null)t=e;else return;typeof t.dataset!="undefined"?(a(i.dataset,t.dataset),i.dataset.src=t.dataset.src?t.dataset.src:t.src,w()&&t.dataset["src-2x"]&&(i.dataset.src=t.dataset["src-2x"])):t.getAttribute("data-src")?i.setAttribute("data-src",t.getAttribute("data-src")):i.setAttribute("data-src",t.getAttribute("src"));u&&i.setAttribute("href",u);f&&i.setAttribute("target",f);t.getAttribute("className")&&n(i,t.getAttribute("className"));t.getAttribute("id")&&i.setAttribute("id",t.getAttribute("id"));t.getAttribute("title")&&i.setAttribute("title",t.getAttribute("title"));t.getAttribute("alt")&&(i.innerHTML=t.getAttribute("alt"));i.setAttribute("role","tabpanel");i.setAttribute("aria-hidden","true");i.style.cssText+="-webkit-transition-duration:"+this.settings.transitionDuration+"ms;-moz-transition-duration:"+this.settings.transitionDuration+"ms;-o-transition-duration:"+this.settings.transitionDuration+"ms;transition-duration:"+this.settings.transitionDuration+"ms;";r.appendChild(i);b.push(i)}}.bind(this)),f=b,f.length<=1)return r.innerHTML="",Array.prototype.forEach.call(y,function(n){r.appendChild(n)}),null;this.settings.disableNav||(this.settings.previousNavSelector?e=document.querySelector(this.settings.previousNavSelector):(e=document.createElement("a"),r.appendChild(e)),this.settings.nextNavSelector?l=document.querySelector(this.settings.nextNavSelector):(l=document.createElement("a"),r.appendChild(l)),n(e,this.settings.classes.previousNav),n(l,this.settings.classes.nextNav),s(e,"click",function(){if(o(this._attributes.container,this.settings.classes.animating))return!1;this.stop();this.previousSlide()}.bind(this)),s(l,"click",function(){if(o(this._attributes.container,this.settings.classes.animating))return!1;this.stop();this.nextSlide()}.bind(this)),("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)&&(this.settings.effect="slide",e.style.display="none",l.style.display="none",n(r,this.settings.classes.touchEnabled),s(r,"touchstart",t.start.bind(this),!1),s(r,"touchmove",t.move.bind(this),!1),s(r,"touchend",t.end.bind(this),!1)),this.settings.keyboardNav&&s(document,"keyup",function(n){n=n||window.event;var t=typeof n.which=="number"?n.which:n.keyCode;if(t==37){if(o(this._attributes.container,this.settings.classes.animating))return!1;this.stop();this.previousSlide()}else if(t==39){if(o(this._attributes.container,this.settings.classes.animating))return!1;this.stop();this.nextSlide()}}.bind(this)));this._attributes={container:r,slides:f,previousSlide:typeof f[f.length-1]!="undefined"?f[f.length-1]:f[0],currentSlide:f[0],nextSlide:typeof f[1]!="undefined"?f[1]:f[0],timerId:0,origChildren:y,aspectWidth:0,aspectHeight:0};c(this.settings.height)?this._attributes.container.style.height=this.settings.height+"px":(c(this.settings.initialHeight)&&(this._attributes.container.style.height=this.settings.initialHeight+"px"),this.settings.height.indexOf(":")>-1&&(v=this.settings.height.split(":"),v.length==2&&c(parseInt(v[0],10))&&c(parseInt(v[1],10))&&(this._attributes.aspectWidth=parseInt(v[0],10),this._attributes.aspectHeight=parseInt(v[1],10))),s(window,"resize",function(){h(this,!1)}.bind(this)));n(r,this.settings.classes.container);n(r,"iis-effect-"+this.settings.effect);Array.prototype.forEach.call(this._attributes.slides,function(t){n(t,this.settings.classes.slide)}.bind(this));n(this._attributes.previousSlide,this.settings.classes.previousSlide);n(this._attributes.currentSlide,this.settings.classes.currentSlide);n(this._attributes.nextSlide,this.settings.classes.nextSlide);this._attributes.currentSlide.setAttribute("aria-hidden","false");u(this._attributes.currentSlide,function(){this.settings.onInit.apply(this);h(this,!1)}.bind(this));u(this._attributes.previousSlide);u(this._attributes.nextSlide)};return e.prototype.get=function(n){return this._attributes?this._attributes.hasOwnProperty(n)?this._attributes[n]:void 0:null},e.prototype.set=function(n,t){return this._attributes?this._attributes[n]=t:null},e.prototype.start=function(){this._attributes&&(this._attributes.timerId=setInterval(this.nextSlide.bind(this),this.settings.interval),this.settings.onStart.apply(this),window.onblur=function(){this.stop()}.bind(this))},e.prototype.stop=function(){this._attributes&&(clearInterval(this._attributes.timerId),this._attributes.timerId=0,this.settings.onStop.apply(this))},e.prototype.previousSlide=function(){this.settings.beforeChange.apply(this);i(this._attributes.previousSlide,this.settings.classes.previousSlide);i(this._attributes.currentSlide,this.settings.classes.currentSlide);i(this._attributes.nextSlide,this.settings.classes.nextSlide);this._attributes.currentSlide.setAttribute("aria-hidden","true");var t=this._attributes.slides,r=t.indexOf(this._attributes.currentSlide);this._attributes.nextSlide=this._attributes.currentSlide;this._attributes.previousSlide=t[r-2];this._attributes.currentSlide=t[r-1];typeof this._attributes.currentSlide=="undefined"&&typeof this._attributes.previousSlide=="undefined"?(this._attributes.currentSlide=t[t.length-1],this._attributes.previousSlide=t[t.length-2]):typeof this._attributes.previousSlide=="undefined"&&(this._attributes.previousSlide=t[t.length-1]);u(this._attributes.previousSlide);n(this._attributes.previousSlide,this.settings.classes.previousSlide);n(this._attributes.currentSlide,this.settings.classes.currentSlide);n(this._attributes.nextSlide,this.settings.classes.nextSlide);this._attributes.currentSlide.setAttribute("aria-hidden","false");n(this._attributes.container,this.settings.classes.directionPrevious);f(function(){i(this._attributes.container,this.settings.classes.directionPrevious)}.bind(this),this.settings.transitionDuration);this.settings.transitionDuration&&(n(this._attributes.container,this.settings.classes.animating),f(function(){i(this._attributes.container,this.settings.classes.animating)}.bind(this),this.settings.transitionDuration));h(this);this.settings.afterChange.apply(this)},e.prototype.nextSlide=function(){this.settings.beforeChange.apply(this);i(this._attributes.previousSlide,this.settings.classes.previousSlide);i(this._attributes.currentSlide,this.settings.classes.currentSlide);i(this._attributes.nextSlide,this.settings.classes.nextSlide);this._attributes.currentSlide.setAttribute("aria-hidden","true");var t=this._attributes.slides,r=t.indexOf(this._attributes.currentSlide);this._attributes.previousSlide=this._attributes.currentSlide;this._attributes.currentSlide=t[r+1];this._attributes.nextSlide=t[r+2];typeof this._attributes.currentSlide=="undefined"&&typeof this._attributes.nextSlide=="undefined"?(this._attributes.currentSlide=t[0],this._attributes.nextSlide=t[1]):typeof this._attributes.nextSlide=="undefined"&&(this._attributes.nextSlide=t[0]);u(this._attributes.nextSlide);n(this._attributes.previousSlide,this.settings.classes.previousSlide);n(this._attributes.currentSlide,this.settings.classes.currentSlide);n(this._attributes.nextSlide,this.settings.classes.nextSlide);this._attributes.currentSlide.setAttribute("aria-hidden","false");n(this._attributes.container,this.settings.classes.directionNext);f(function(){i(this._attributes.container,this.settings.classes.directionNext)}.bind(this),this.settings.transitionDuration);this.settings.transitionDuration&&(n(this._attributes.container,this.settings.classes.animating),f(function(){i(this._attributes.container,this.settings.classes.animating)}.bind(this),this.settings.transitionDuration));h(this);this.settings.afterChange.apply(this)},e.prototype.gotoSlide=function(t){this.settings.beforeChange.apply(this);this.stop();i(this._attributes.previousSlide,this.settings.classes.previousSlide);i(this._attributes.currentSlide,this.settings.classes.currentSlide);i(this._attributes.nextSlide,this.settings.classes.nextSlide);this._attributes.currentSlide.setAttribute("aria-hidden","true");t--;var r=this._attributes.slides,e=r.indexOf(this._attributes.currentSlide);this._attributes.previousSlide=r[t-1];this._attributes.currentSlide=r[t];this._attributes.nextSlide=r[t+1];typeof this._attributes.previousSlide=="undefined"&&(this._attributes.previousSlide=r[r.length-1]);typeof this._attributes.nextSlide=="undefined"&&(this._attributes.nextSlide=r[0]);u(this._attributes.previousSlide);u(this._attributes.currentSlide);u(this._attributes.nextSlide);n(this._attributes.previousSlide,this.settings.classes.previousSlide);n(this._attributes.currentSlide,this.settings.classes.currentSlide);n(this._attributes.nextSlide,this.settings.classes.nextSlide);this._attributes.currentSlide.setAttribute("aria-hidden","false");t<e?(n(this._attributes.container,this.settings.classes.directionPrevious),f(function(){i(this._attributes.container,this.settings.classes.directionPrevious)}.bind(this),this.settings.transitionDuration)):(n(this._attributes.container,this.settings.classes.directionNext),f(function(){i(this._attributes.container,this.settings.classes.directionNext)}.bind(this),this.settings.transitionDuration));this.settings.transitionDuration&&(n(this._attributes.container,this.settings.classes.animating),f(function(){i(this._attributes.container,this.settings.classes.animating)}.bind(this),this.settings.transitionDuration));h(this);this.settings.afterChange.apply(this)},e.prototype.destroy=function(){clearInterval(this._attributes.timerId);this._attributes.timerId=0;this._attributes.container.innerHTML="";Array.prototype.forEach.call(this._attributes.origChildren,function(n){this._attributes.container.appendChild(n)}.bind(this));i(this._attributes.container,this.settings.classes.container);i(this._attributes.container,"iis-effect-"+this.settings.effect);this._attributes.container.style.height="";this.settings.onDestroy.apply(this)},{_hasClass:o,_addClass:n,_removeClass:i,Slider:e}}();