(function(){function t(){SP.SOD.executeOrDelayUntilScriptLoaded(function(){n.Locale=Strings.STS.L_CurrentUICulture_Name;SP.SOD.registerSod(n.ListResourceFileName,"/_layouts/15/ScriptResx.ashx?name="+n.ListResourceFileName+"&culture="+STSHtmlEncode(Strings.STS.L_CurrentUICulture_Name));SP.SOD.executeFunc(n.ListResourceFileName,"Res",i)},"strings.js")}function i(){$(".freight-request-cancel").click(function(){$(this).attr("disabled","true");var n=$(this).attr("data-id"),t=window.location.protocol+"//{0}/_vti_bin/services/Freightmanagement/Freightmanagementservice.svc/CancelFreight/{1}",t=RBVH.Stada.WebPages.Utilities.String.format(t,location.host,n);n&&$.ajax({type:"GET",url:t,contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){n.Code===6&&alert(n.Message);window.location.reload()},error:function(){console.log("Error while cancelling this request")}})});$("#freight-request-detail").text(Res.freightManagement_ViewDetail);$("#freight-request-requestNo").text(Res.freightManagement_RequestNumber);$("#freight-request-requester").text(Res.freightManagement_Requester);$("#freight-request-bringer").text(Res.freightManagement_Bringer);$("#freight-request-receiver").text(Res.freightManagement_Receiver);$("#freight-request-created").text(Res.createdDate);$("#freight-request-comment").text(Res.commonComment);$("#freight-request-status").text(Res.freightManagement_ApprovalStatus);$("#freight-request-isValid").text(Res.freightList_IsValidRequest);$("#"+n.Container+" .viewDetail").text(Res.freightManagement_ViewDetail);$(".label-success").text(Res.approvalStatus_Approved);$(".label-warning").text(Res.approvalStatus_Cancelled);$(".label-danger").text(Res.approvalStatus_Rejected);$(".freight-request-cancel").text(Res.freightManagement_CancelRequest);n.CompanyVehicle=Res.freightManagement_CompanyVehicle;$(".companyvehicle").text(n.CompanyVehicle)}function r(t){var a="<td>"+t.CurrentItem.Requester[0].lookupValue+"<\/td>",s="<td><\/td>",h,i,f,e,c,o,u,l;s=t.CurrentItem.Bringer&&t.CurrentItem.Bringer[0].lookupId>0?"<td>"+t.CurrentItem.Bringer[0].lookupValue+"<\/td>":t.CurrentItem.BringerName&&t.CurrentItem.BringerName.length>0?"<td>"+t.CurrentItem.BringerName+"<\/td>":'<td class="companyvehicle">'+n.CompanyVehicle+"<\/td>";var v=t.CurrentItem.Receiver!=null?"<td>"+t.CurrentItem.Receiver+"<\/td>":"<td><\/td>",y="<td>"+t.CurrentItem.Created+"<\/td>",p=t.CurrentItem.CommonComment!=null?"<td>"+Functions.parseComment(t.CurrentItem.CommonComment)+"<\/td>":"<td><\/td>",r=window.location.href.split("#")[0];return r=Functions.removeParam("lang",r),r+="#tab1",r=encodeURIComponent(r),h='<td><a href="/SitePages/FreightRequest.aspx?subSection=FreightManagement&itemId='+t.CurrentItem.ID+"&Source="+r+'"   class="viewDetail" >View Detail<\/a><\/td>',i=t.CurrentItem.ApprovalStatus+"",i=i.toLowerCase(),f="",e="",(t.CurrentItem.Editor[0].id!==t.CurrentItem.Author[0].id||t.CurrentItem.Editor[0].id===t.CurrentItem.Author[0].id&&i==="cancelled")&&(e="disabled"),c="<td><button type='button' class='btn btn-default btn-sm freight-request-cancel' "+e+" data-id='"+t.CurrentItem.ID+"'>Cancel Request<\/button><\/td>",f=i==="approved"?'<td><span class="label label-success">Approved<\/span><\/td>':i==="cancelled"?'<td><span class="label label-warning">Cancelled<\/span><\/td>':i==="rejected"?'<td><span class="label label-danger">Rejected<\/span><\/td>':i&&i.length>0?'<td><span class="label label-default statusmultilang">'+t.CurrentItem.ApprovalStatus+"<\/span><\/td>":'<td><span class="label label-default">In-Progress<\/span><\/td>',o="",u="",t.CurrentItem["IsValidRequest.value"]&&t.CurrentItem["IsValidRequest.value"]==="1"?u="<td><span style='margin-left:25%; ' class='glyphicon glyphicon-ok'><\/td>":(u="<td><span style='margin-left:25%;' class='glyphicon glyphicon-remove'><\/td>",o="style='background-color: #fff7e6;'"),l=t.CurrentItem.RequestNo!=null?"<td>"+t.CurrentItem.RequestNo+"<\/td>":"<td><\/td>","<tr "+o+" >"+h+l+a+s+v+y+p+f+u+c+"<\/tr>"}function u(n){return ViewUtilities.Paging.InstanceHtml(n)}var n={FreightManagement_ViewDetail:"View Detail",FreightManagement_Requester:"Requester",FreightManagement_Bringer:"Bringer",FreightManagement_Receiver:"Received by",FreightManagement_Created:"Created",FreightManagement_Comment:"Comment",FreightManagement_IsValid:"Is valid",FreightManagement_ApprovalStatus:"Approval status",FreightManagement_RequestNumber:"Request number",ListResourceFileName:"RBVHStadaLists",PageResourceFileName:"RBVHStadaWebpages",CompanyVehicle:"Company's Vehicle",Locale:"",Container:"freight-request-list-container"};(function(){var i={};i.Templates={};i.Templates.Item=r;i.OnPreRender=function(){$(".ms-menutoolbar").hide()};i.ListTemplateType=10015;i.BaseViewID=2;i.OnPostRender=t;i.Templates.Header="<div class='col-md-12'><table class='table'><thead><tr><th id='freight-request-detail'>"+n.FreightManagement_ViewDetail+"<\/th><th id='freight-request-requestNo'>"+n.FreightManagement_RequestNumber+"<\/th><th id='freight-request-requester'>"+n.FreightManagement_Requester+"<\/th><th id='freight-request-bringer'>"+n.FreightManagement_Bringer+"<\/th><th id='freight-request-receiver'>"+n.FreightManagement_Receiver+"<\/th><th id='freight-request-created'>"+n.FreightManagement_Created+"<\/th><th id='freight-request-comment'>"+n.FreightManagement_Comment+"<\/th><th id='freight-request-status'>"+n.FreightManagement_ApprovalStatus+"<\/th><th id='freight-request-isValid'>"+n.FreightManagement_IsValid+"<\/th><th id='freight-request-action'><\/th><th><\/th><\/tr><\/thead><tbody>";i.Templates.Footer=u;SPClientTemplates.TemplateManager.RegisterTemplateOverrides(i)})()})();