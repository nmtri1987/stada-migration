RBVH.Stada.javascript.common.NamespaceManager.register("RBVH.Stada.WebPages.pages");RBVH.Stada.WebPages.pages.Overview=function(n){this.Protocol=window.location.protocol;this.Settings={Condition:{WaitingApproval:"WaitingApproval",WaitingApprovalToday:"WaitingApprovalToday",InProcess:"InProcess",ApprovedToday:"ApprovedToday"},Data:{LCID:0,ApprovalStatus:[],Departments:[],Modules:[],OriginalModuleDataSource:[],OriginalGridToDoTaskDataSource:[],OriginalGridDoneTaskDataSource:[],ProcessedGridDataSource:[],UserInfoId:0,UserADId:0,LocationId:2,Position:"",IsBOD:!1,Condition:"",Top:2e4},Grid:{DataSource:[],ShaderCssClass:".jsgrid-load-shader",LoadPanelCssClass:".jsgrid-load-panel",LoadedData:!1},Chart:{DataSource:{TotalWaitingApproval:0,TotalWaitingApprovalToday:0,TotalInProcess:0,TotalApprovedToday:0}},ChartObj:{}};$.extend(!0,this.Settings,n);this.Initialize()};RBVH.Stada.WebPages.pages.Overview.prototype={Initialize:function(){var n=this;$(document).ready(function(){n.InitDefaultValue();n.RegisterEvents();$(n.Settings.Chart.ShaderSelector).show();var t=$(n.Settings.Chart.LoaderSelector).show(),i=t.outerWidth(),r=t.outerHeight();t.css({marginTop:-r/2,marginLeft:-i/2});$.when(n.PopulateModules(),n.GetPendingOverview(),n.GetDoneOverview()).done(function(t,i,r){t&&t.length>0&&t[0].d&&t[0].d.results&&(n.Settings.Data.OriginalModuleDataSource=t[0].d.results,$.each(t[0].d.results,function(t,i){n.Settings.Data.LCID==1066?n.Settings.Data.Modules.push({Name:i.VietnameseModuleName,Id:i.ID}):n.Settings.Data.Modules.push({Name:i.ModuleName,Id:i.ID})}));n.Settings.Data.Modules.unshift({Name:"",Id:0});n.PopulateGridFilter(n.PopulateGrid);n.ResetChartDataSource();var u=(new Date).setHours(0,0,0,0);$.each(i[0].d.results,function(t,i){var r=n.ClassifyTaskCategory(i,u);if(r)switch(r){case n.Settings.Condition.WaitingApproval:n.Settings.Chart.DataSource.TotalWaitingApproval+=1;break;case n.Settings.Condition.WaitingApprovalToday:n.Settings.Chart.DataSource.TotalWaitingApprovalToday+=1;break;case n.Settings.Condition.InProcess:n.Settings.Chart.DataSource.TotalInProcess+=1}});r&&r.length>0&&r[0].d&&r[0].d.results&&(n.Settings.Chart.DataSource.TotalApprovedToday=r[0].d.results.length);n.PopulateChart(n.Settings.Chart.DataSource)})})},ResetChartDataSource:function(){var n=this;n.Settings.Chart.DataSource={TotalWaitingApproval:0,TotalWaitingApprovalToday:0,TotalInProcess:0,TotalApprovedToday:0}},ClassifyTaskCategory:function(n,t){var u=this,f=u.Settings.Data.OriginalModuleDataSource.filter(function(t){return t.ID==n.ModuleNameENId?t:null}),r,i,e;if(f&&f.length>0){if(f[0].ListURL.toLowerCase()=="/lists/shiftmanagement")return u.Settings.Condition.WaitingApprovalToday;if(f[0].ListURL.toLowerCase()=="/lists/changeshiftmanagement"){if(n.ListItemDueDate&&n.ListItemDueDate.length>0){if(i=new Date(n.ListItemDueDate).setHours(0,0,0,0),r=new Date(t),r.setDate(r.getDate()+1),i&&(i.valueOf()==t.valueOf()||i.valueOf()==r.valueOf()))return u.Settings.Condition.WaitingApprovalToday;if(i&&i.valueOf()>r.valueOf())return u.Settings.Condition.WaitingApproval}}else if(f[0].ListURL.toLowerCase()=="/lists/overtimemanagement"){if(n.ListItemDueDate&&n.ListItemDueDate.length>0&&(i=new Date(n.ListItemDueDate).setHours(0,0,0,0),i&&i.valueOf()>=t.valueOf()))return u.Settings.Condition.WaitingApprovalToday}else if(f[0].ListURL.toLowerCase()=="/lists/notovertimemanagement"){if(n.ListItemDueDate&&n.ListItemDueDate.length>0){if(i=new Date(n.ListItemDueDate).setHours(0,0,0,0),r=new Date(t),r.setDate(r.getDate()+1),i&&(i.valueOf()==t.valueOf()||i.valueOf()==r.valueOf()))return u.Settings.Condition.WaitingApprovalToday;if(i&&i.valueOf()>r.valueOf())return u.Settings.Condition.WaitingApproval}}else if(f[0].ListURL.toLowerCase()=="/lists/leavemanagement"){if(n.ListItemDueDate&&n.ListItemDueDate.length>0){if(i=new Date(n.ListItemDueDate).setHours(0,0,0,0),r=new Date(t),r.setDate(r.getDate()+1),i&&(i.valueOf()==t.valueOf()||i.valueOf()==r.valueOf()))return u.Settings.Condition.WaitingApprovalToday;if(i&&i.valueOf()>r.valueOf())return u.Settings.Condition.WaitingApproval}}else if(f[0].ListURL.toLowerCase()=="/lists/vehiclemanagement"){if(n.ListItemDueDate&&n.ListItemDueDate.length>0){if(i=new Date(n.ListItemDueDate).setHours(0,0,0,0),r=new Date(t),r.setDate(r.getDate()+1),i&&(i.valueOf()==t.valueOf()||i.valueOf()==r.valueOf()))return u.Settings.Condition.WaitingApprovalToday;if(i&&i.valueOf()>r.valueOf())return u.Settings.Condition.WaitingApproval}}else if(f[0].ListURL.toLowerCase()=="/lists/freightmanagement"){if(n.ListItemDueDate&&n.ListItemDueDate.length>0&&(i=new Date(n.ListItemDueDate).setHours(0,0,0,0),i&&i.valueOf()>=t.valueOf()))return u.Settings.Condition.WaitingApprovalToday}else if(f[0].ListURL.toLowerCase()=="/lists/businesstripmanagement"){if(n.ListItemDueDate&&n.ListItemDueDate.length>0){if(i=new Date(n.ListItemDueDate).setHours(0,0,0,0),r=new Date(t),r.setDate(r.getDate()+1),i&&(i.valueOf()==t.valueOf()||i.valueOf()==r.valueOf()))return u.Settings.Condition.WaitingApprovalToday;if(i&&i.valueOf()>r.valueOf())return u.Settings.Condition.WaitingApproval}}else if(f[0].ListURL.toLowerCase()=="/lists/requests"){if(n.ApprovalStatusEN&&n.ApprovalStatusEN.NameEN&&n.ApprovalStatusEN.NameEN.toLowerCase()=="in-process")return u.Settings.Condition.InProcess;if(n.ListItemDueDate&&n.ListItemDueDate.length>0){if(i=new Date(n.ListItemDueDate).setHours(0,0,0,0),r=new Date(t),r.setDate(r.getDate()+1),i&&(i.valueOf()==t.valueOf()||i.valueOf()==r.valueOf()))return u.Settings.Condition.WaitingApprovalToday;if(i&&i.valueOf()>r.valueOf())return u.Settings.Condition.WaitingApproval}else return u.Settings.Condition.WaitingApproval}else if(f[0].ListURL.toLowerCase()=="/lists/employeerequirementsheets"){if(n.ListItemDueDate&&n.ListItemDueDate.length>0){if(i=new Date(n.ListItemDueDate).setHours(0,0,0,0),e=new Date(t),e.setDate(e.getDate()+15+1),i&&i.valueOf()>e.valueOf())return u.Settings.Condition.WaitingApproval;if(i&&i.valueOf()>t.valueOf()&&i.valueOf()<=e.valueOf())return u.Settings.Condition.WaitingApprovalToday}}else if(f[0].ListURL.toLowerCase()=="/lists/requestfordiplomasupplies")return u.Settings.Condition.WaitingApproval}return""},RegisterEvents:function(){$("h2.conner .show-hide").click(function(n){n.stopPropagation();$(this).parent().parent().find(".grid-content").toggle();var t=$(this);t.hasClass("s-expand")?(t.removeClass("s-expand"),t.addClass("s-collapse"),$(window).trigger("resize")):(t.removeClass("s-collapse"),t.addClass("s-expand"),$(window).trigger("resize"))})},InitDefaultValue:function(){this.Settings.Data.LCID=_spPageContextInfo.currentLanguage;_rbvhContext.EmployeeInfo!=null&&(this.Settings.Data.UserInfoId=_rbvhContext.EmployeeInfo.ID,this.Settings.Data.UserADId=_rbvhContext.EmployeeInfo.ADAccount.ID,this.Settings.Data.LocationId=_rbvhContext.EmployeeInfo.FactoryLocation.LookupId,this.Settings.Data.FullName=_rbvhContext.EmployeeInfo.FullName,this.Settings.Data.Position=_rbvhContext.EmployeeInfo.EmployeePosition.LookupValue,this.Settings.Data.IsBOD=this.Settings.Data.Position=="Board of Director")},GetPendingOverview:function(){var n=this,t="&$filter=AssignedTo eq "+n.Settings.Data.UserInfoId,i=_spPageContextInfo.siteAbsoluteUrl+"/_api/web/lists/getByTitle('Task List ToDo')/items?$top="+n.Settings.Data.Top+"&$select=ID,ListItemID,ListItemDueDate,ModuleNameENId,ApprovalStatusEN/NameEN&$expand=ApprovalStatusEN/NameEN"+t;return $.ajax({method:"GET",url:i,headers:{Accept:"application/json; odata=verbose"}})},GetDoneOverview:function(){var t=this,i=new Date,n,r;return i.setHours(0,0,0,0),n="&$filter=(AssignedTo eq "+t.Settings.Data.UserInfoId+")",n+=" and (Created gt datetime'"+i.toISOString()+"')",r=_spPageContextInfo.siteAbsoluteUrl+"/_api/web/lists/getByTitle('Task List Done')/items?$top="+t.Settings.Data.Top+"&$select=ID,ListItemID,ListItemDueDate"+n,$.ajax({method:"GET",url:r,headers:{Accept:"application/json; odata=verbose"}})},GetDetailPendingTask:function(){var n=this,t="&$filter=AssignedTo eq "+n.Settings.Data.UserInfoId,i=_spPageContextInfo.siteAbsoluteUrl+"/_api/web/lists/getByTitle('Task List ToDo')/items?$top="+n.Settings.Data.Top+"&$select=ID,ListItemID,ListItemApprovalUrl,ListItemDescription,ListItemCreatedDate,ListItemDueDate,ListURL,RequesterId,DepartmentENId,ModuleNameENId,ApprovalStatusENId,Requester/EmployeeDisplayName,ApprovalStatusEN/NameEN&$expand=Requester/EmployeeDisplayName,ApprovalStatusEN/NameEN"+t;return $.ajax({method:"GET",url:i,headers:{Accept:"application/json; odata=verbose"}})},GetDetailDoneTask:function(){var t=this,i=new Date,n,r;return i.setHours(0,0,0,0),n="&$filter=(AssignedTo eq "+t.Settings.Data.UserInfoId+")",n+=" and (Created gt datetime'"+i.toISOString()+"')",r=_spPageContextInfo.siteAbsoluteUrl+"/_api/web/lists/getByTitle('Task List Done')/items?$top="+t.Settings.Data.Top+"&$select=ID,ListItemID,ListItemApprovalUrl,ListItemDescription,ListItemCreatedDate,ListItemDueDate,ListURL,RequesterId,DepartmentENId,ModuleNameENId,ApprovalStatusENId,Requester/EmployeeDisplayName&$expand=Requester/EmployeeDisplayName"+n,$.ajax({method:"GET",url:r,headers:{Accept:"application/json; odata=verbose"}})},PopulateChart:function(n){var t=this,i=["#888d91","#c1140b","#db1ed2","#5cb85c"],r;t.Settings.ChartObj=new Highcharts.chart("container",{chart:{type:"column",events:{load:function(){$(t.Settings.Chart.ShaderSelector).hide();$(t.Settings.Chart.LoaderSelector).hide()}}},xAxis:{categories:[t.Settings.Chart.Columns.Title.WaitingApprovalTitle,t.Settings.Chart.Columns.Title.WaitingApprovalTodayTitle,t.Settings.Chart.Columns.Title.InProcessTitle,t.Settings.Chart.Columns.Title.ApprovedTodayTitle],labels:{style:{color:"#575c60",font:'14px "Helvetica Neue",Helvetica,Arial,sans-serif'}}},title:{text:"",style:{fontSize:"2.77em",fontFamily:'"Helvetica Neue",Helvetica,Arial,sans-serif'}},yAxis:{allowDecimals:!1,title:{text:t.Settings.Chart.Columns.Title.LeftColumnTitle},labels:{style:{color:"#575c60",font:'14px "Helvetica Neue",Helvetica,Arial,sans-serif'}}},tooltip:{formatter:function(){return"<b>"+this.series.name+"<\/b><br/>"+this.point.y+" "+this.point.name.toLowerCase()}},plotOptions:{series:{cursor:"pointer",point:{events:{click:function(){var n,r,i;$(t.Settings.Grid.ShaderCssClass).show();$(t.Settings.Grid.LoadPanelCssClass).show();$(t.Settings.Grid.TaskListTitleSelector).html(" - "+this.category);n=$(t.Settings.Grid.Selector).data("JSGrid");n!=null&&(r=n._createFilterRow(),n._filterRow.replaceWith(r),n._filterRow=r);this.category==t.Settings.Chart.Columns.Title.WaitingApprovalTitle?t.Settings.Data.Condition=t.Settings.Condition.WaitingApproval:this.category==t.Settings.Chart.Columns.Title.WaitingApprovalTodayTitle?t.Settings.Data.Condition=t.Settings.Condition.WaitingApprovalToday:this.category==t.Settings.Chart.Columns.Title.InProcessTitle?t.Settings.Data.Condition=t.Settings.Condition.InProcess:this.category==t.Settings.Chart.Columns.Title.ApprovedTodayTitle&&(t.Settings.Data.Condition=t.Settings.Condition.ApprovedToday);t.Settings.Grid.LoadedData==!1?$.when(t.GetDetailPendingTask(),t.GetDetailDoneTask()).done(function(n,i){var u,r;n&&n.length>0&&n[0].d&&n[0].d.results&&(t.Settings.Data.OriginalGridToDoTaskDataSource=n[0].d.results,u=(new Date).setHours(0,0,0,0),t.ResetChartDataSource(),$.each(t.Settings.Data.OriginalGridToDoTaskDataSource,function(n,i){var r="",f=t.ClassifyTaskCategory(i,u);switch(f){case t.Settings.Condition.WaitingApproval:t.Settings.Chart.DataSource.TotalWaitingApproval+=1;r=t.Settings.Condition.WaitingApproval;break;case t.Settings.Condition.WaitingApprovalToday:t.Settings.Chart.DataSource.TotalWaitingApprovalToday+=1;r=t.Settings.Condition.WaitingApprovalToday;break;case t.Settings.Condition.InProcess:t.Settings.Chart.DataSource.TotalInProcess+=1;r=t.Settings.Condition.InProcess}t.Settings.Data.ProcessedGridDataSource.push({ItemId:i.ListItemID,ItemApprovalUrl:i.ListItemApprovalUrl,ModuleId:i.ModuleNameENId,ModuleName:null,RequesterId:i.RequesterId,RequesterName:i.Requester.EmployeeDisplayName,DepartmentId:i.DepartmentENId,DepartmentName:null,Description:i.ListItemDescription,ApprovalStatusId:i.ApprovalStatusENId,ApprovalStatus:null,CreatedDate:Functions.parseVietnameseDateTimeToDDMMYYYY2(new Date(i.ListItemCreatedDate)),DueDate:Functions.parseVietnameseDateTimeToDDMMYYYY2(new Date(i.ListItemDueDate)),Condition:r})}));i&&i.length>0&&i[0].d&&i[0].d.results&&(t.Settings.Data.OriginalGridDoneTaskDataSource=i[0].d.results,t.Settings.Chart.DataSource.TotalApprovedToday=t.Settings.Data.OriginalGridDoneTaskDataSource.length,$.each(t.Settings.Data.OriginalGridDoneTaskDataSource,function(n,i){t.Settings.Data.ProcessedGridDataSource.push({ItemId:i.ListItemID,ItemApprovalUrl:i.ListItemApprovalUrl,ModuleId:i.ModuleNameENId,ModuleName:null,RequesterId:i.RequesterId,RequesterName:i.Requester.EmployeeDisplayName,DepartmentId:i.DepartmentENId,DepartmentName:null,Description:i.ListItemDescription,ApprovalStatusId:i.ApprovalStatusENId,ApprovalStatus:null,CreatedDate:Functions.parseVietnameseDateTimeToDDMMYYYY2(new Date(i.ListItemCreatedDate)),DueDate:Functions.parseVietnameseDateTimeToDDMMYYYY2(new Date(i.ListItemDueDate)),Condition:t.Settings.Condition.ApprovedToday})}));t.PopulateChart(t.Settings.Chart.DataSource);t.Settings.Grid.DataSource=[];r=t.Settings.Data.ProcessedGridDataSource.filter(function(n){return n.Condition==t.Settings.Data.Condition});r&&r.length>0&&(t.Settings.Grid.DataSource=r);t.Settings.Grid.LoadedData=!0;$(t.Settings.Grid.Selector).jsGrid("loadData")}):($(t.Settings.Grid.ShaderCssClass).show(),$(t.Settings.Grid.LoadPanelCssClass).show(),t.Settings.Grid.DataSource=[],i=t.Settings.Data.ProcessedGridDataSource.filter(function(n){return n.Condition==t.Settings.Data.Condition}),i&&i.length>0&&(t.Settings.Grid.DataSource=i),$(t.Settings.Grid.Selector).jsGrid("loadData"))}}},dataLabels:{enabled:!0,crop:!1,overflow:"none",style:{fontSize:"13px"}}}},legend:{enabled:!1},series:[{name:t.Settings.Chart.Label,data:[{name:t.Settings.Chart.Columns.Title.WaitingApprovalTitle,y:n.TotalWaitingApproval,color:i[0]},{name:t.Settings.Chart.Columns.Title.WaitingApprovalTodayTitle,y:n.TotalWaitingApprovalToday,color:i[1]},{name:t.Settings.Chart.Columns.Title.InProcessTitle,y:n.TotalInProcess,color:i[2]},{name:t.Settings.Chart.Columns.Title.ApprovedTodayTitle,y:n.TotalApprovedToday,color:i[3]}]}],exporting:{enabled:!1},credits:{enabled:!1}});$(window).resize(function(){clearTimeout(r);r=setTimeout(function(){var n=$("#container").parent().width();t.Settings.ChartObj.setSize(n,301,doAnimation=!0)},100)})},PopulateGrid:function(){function t(n,t){return $.grep(n,function(n){return(!t.RequesterName||n.RequesterName.toLowerCase().indexOf(t.RequesterName.toLowerCase())>-1)&&(!t.DepartmentId||n.DepartmentId==t.DepartmentId)&&(!t.ModuleId||n.ModuleId==t.ModuleId)&&(!t.Description||n.Description.toLowerCase().indexOf(t.Description.toLowerCase())>-1)&&(!t.CreatedDate||n.CreatedDate.indexOf(t.CreatedDate)>-1)&&(!t.DueDate||n.DueDate.indexOf(t.DueDate)>-1)&&(!t.ApprovalStatusId||n.ApprovalStatusId==t.ApprovalStatusId)})}var n=this;$(n.Settings.Grid.Selector).jsGrid({height:"100%",width:"100%",filtering:!0,sorting:!0,paging:!0,autoload:!0,pageSize:20,pageButtonCount:5,pagerFormat:n.Settings.Grid.PagerFormat,pagePrevText:"<",pageNextText:">",pageFirstText:"<<",pageLastText:">>",noDataContent:n.Settings.Grid.EmptyDataTitle,loadMessage:n.Settings.Grid.LoadMessageTitle,controller:{loadData:function(i){if(n.Settings.Data.Condition=="")return[];if(n.Settings.Grid.LoadedData)return t(n.Settings.Grid.DataSource,i);$(n.Settings.Grid.ShaderCssClass).hide();$(n.Settings.Grid.LoadPanelCssClass).hide()}},fields:[{name:"ItemApprovalUrl",type:"text",width:50,filtering:!1,align:"center",title:"#",itemTemplate:function(n){var t=$("<a>").attr("href",n).attr("target","_blank"),i=$("<i>").attr("class","fa fa-eye");return t.append(i),$("<div>").append(t)}},{name:"ModuleId",type:"select",title:n.Settings.Grid.Columns.Title.Module,width:"12%",items:n.Settings.Data.Modules,valueField:"Id",textField:"Name",align:"left"},{name:"RequesterName",type:"text",title:n.Settings.Grid.Columns.Title.Requester,width:"12%",align:"left"},{name:"DepartmentId",type:"select",title:n.Settings.Grid.Columns.Title.Department,width:"12%",items:n.Settings.Data.Departments,valueField:"Id",textField:"DepartmentName",align:"left",filtering:n.Settings.Data.IsBOD},{name:"Description",type:"text",title:n.Settings.Grid.Columns.Title.Description,width:"auto",align:"left"},{name:"ApprovalStatusId",type:"select",title:n.Settings.Grid.Columns.Title.ApprovalStatus,width:"12%",items:n.Settings.Data.ApprovalStatus,valueField:"Id",textField:"Name",align:"center"},{name:"CreatedDate",type:"text",title:n.Settings.Grid.Columns.Title.CreatedDate,width:"12%",align:"center"},{name:"DueDate",type:"text",title:n.Settings.Grid.Columns.Title.DueDate,width:"12%",align:"center"},{type:"control",modeSwitchButton:!1,editButton:!1,deleteButton:!1}],onDataLoaded:function(){$("tr.jsgrid-row > td:nth-child(6), tr.jsgrid-alt-row > td:nth-child(6)").each(function(){var n=$(this),t=RBVH.Stada.WebPages.Utilities.GUI.generateItemStatus(n.html());n.html(t)})}})},PopulateModules:function(){var i=this,n="&$orderby=ModuleName",t;return _spPageContextInfo.currentLanguage==1066&&(n="&$orderby=VietnameseModuleName"),t=_spPageContextInfo.siteAbsoluteUrl+"/_api/web/lists/getByTitle('Delegations Module')/items?$select=ID,ListURL,ModuleName,VietnameseModuleName&"+n,$.ajax({method:"GET",url:t,headers:{Accept:"application/json; odata=verbose"}})},PopulateDepartments:function(){var i=this,n="&$orderby=CommonName",t;return _spPageContextInfo.currentLanguage==1066&&(n="&$orderby=CommonName1066"),t=_spPageContextInfo.siteAbsoluteUrl+"/_api/web/lists/getByTitle('Departments')/items?$select=ID,CommonName,CommonName1066&$filter=CommonMultiLocations eq "+i.Settings.Data.LocationId+n,$.ajax({method:"GET",url:t,headers:{Accept:"application/json; odata=verbose"}})},PopulateApprovalStatus:function(){var i=this,n="&$orderby=NameEN",t;return _spPageContextInfo.currentLanguage==1066&&(n="&$orderby=NameVN"),t=_spPageContextInfo.siteAbsoluteUrl+"/_api/web/lists/getByTitle('Task List Approval Status')/items?$select=ID,NameEN,NameVN&"+n,$.ajax({method:"GET",url:t,headers:{Accept:"application/json; odata=verbose"}})},PopulateGridFilter:function(n){var t=this;$.when(t.PopulateDepartments(),t.PopulateApprovalStatus()).done(function(i,r){if(i&&i.length>0&&i[0].d&&i[0].d.results&&$.each(i[0].d.results,function(n,i){t.Settings.Data.LCID==1066?t.Settings.Data.Departments.push({DepartmentName:i.CommonName1066,Id:i.ID}):t.Settings.Data.Departments.push({DepartmentName:i.CommonName,Id:i.ID})}),t.Settings.Data.Departments.unshift({DepartmentName:"",Id:0}),r&&r.length>0&&r[0].d&&r[0].d.results&&$.each(r[0].d.results,function(n,i){t.Settings.Data.LCID==1066?t.Settings.Data.ApprovalStatus.push({Name:i.NameVN,Id:i.ID}):t.Settings.Data.ApprovalStatus.push({Name:i.NameEN,Id:i.ID})}),t.Settings.Data.ApprovalStatus.unshift({Name:"",Id:0}),typeof n=="function"){var u=n.bind(t);u()}})}};