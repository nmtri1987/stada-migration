function onPostRender(n){function t(){EmployeeFormResource.None=Res.none;n.BaseViewID=="NewForm"&&(loadedManager||(EmployeeForm.loadManager(""),loadedManager=!0))}SP.SOD.executeOrDelayUntilScriptLoaded(function(){SP.SOD.registerSod(EmployeeFormResource.ListResourceFileName,"/_layouts/15/ScriptResx.ashx?name="+EmployeeFormResource.ListResourceFileName+"&culture="+STSHtmlEncode(Strings.STS.L_CurrentUICulture_Name));SP.SOD.executeFunc(EmployeeFormResource.ListResourceFileName,"Res",t);runOnce||(EmployeeForm.onTypeEmployeeName(),EmployeeForm.onDepartmentChange(),runOnce=!0)},"strings.js","sp.js")}var FullNameOrder=0,runOnce,loadedManager,EmployeeFormResource,EmployeeForm;(function(){function t(n){var t=SPClientTemplates.Utility.GetFormContextForCurrentField(n);return t.fieldSchema.OnUserResolvedClientScript=function(t,r){i(n,r)},SPClientPeoplePickerCSRTemplate(n)}function i(t,i){if(i.length!==0){var r=i[0].Description,u=_spPageContextInfo.webAbsoluteUrl+"/_api/SP.UserProfiles.PeopleManager/getpropertiesfor(@v)?@v='"+r+"'";try{$.ajax({url:u,method:"GET",headers:{Accept:"application/json; odata=verbose"},cache:!1,success:function(t){var u,i,r;if(t.d.UserProfileProperties!=undefined&&t.d.UserProfileProperties.results.length>0)for(u=t.d.UserProfileProperties.results,i=0;i<u.length;i++)for(r=0;r<n.length;r++)u[i].Key===n[r].PropertyName&&(EmployeeForm.setFieldControlValue(n[r].FieldName,u[i].Value),EmployeeForm.setFullName());else EmployeeForm.clearTextBoxs()},error:function(){}})}catch(f){}}}function r(){var n={};n.Templates={};n.Templates.OnPostRender=onPostRender;n.Templates.Fields={ADAccount:{NewForm:t,EditForm:t}};SPClientTemplates.TemplateManager.RegisterTemplateOverrides(n)}var n=[{PropertyName:"FirstName",FieldName:"FirstName"},{PropertyName:"LastName",FieldName:"LastName"},{PropertyName:"WorkEmail",FieldName:"Email"},{PropertyName:"Title",FieldName:"Position"}];ExecuteOrDelayUntilScriptLoaded(r,"clienttemplates.js")})();runOnce=!1;loadedManager=!1;EmployeeFormResource={ListResourceFileName:"RBVHStadaLists",None:"(None)"};EmployeeForm={MIN_EMPLOYEE_LEVEL:3.1,LoadManagerUrl:"/_vti_bin/Services/Employee/EmployeeService.svc/GetManagerByDepartment/",setFieldControlValue:function(n,t){var i=$("[id ^="+n+"][id $=Field]");i.val(t)},onTypeEmployeeName:function(){$(document).on("input",this.getControlInput("FirstName"),function(){EmployeeForm.setFullName()});$(document).on("input",this.getControlInput("LastName"),function(){EmployeeForm.setFullName()});$(document).on("input",this.getControlInput("ADAccount"),function(){EmployeeForm.clearTextBoxs()})},getControlInput:function(n){return"input[id^='"+n+"_'][id $=Field]"},getControlSelect:function(n){return"select[id^='"+n+"_'][id $=Field]"},setFullName:function(){var n=$(this.getControlInput("FirstName")).val(),t=$(this.getControlInput("LastName")).val();FullNameOrder==0?$(this.getControlInput("EmployeeDisplayName")).val(t+" "+n):$(this.getControlInput("EmployeeDisplayName")).val(n+" "+t)},clearTextBoxs:function(){this.setFieldControlValue("FirstName","");this.setFieldControlValue("LastName","");this.setFieldControlValue("EmployeeDisplayName","");this.setFieldControlValue("Email","")},onDepartmentChange:function(){$(document).on("change",EmployeeForm.getControlSelect("EmployeeInfoDepartment"),function(){$(".se-pre-con").fadeIn(0);var n=$(this),t=n.val();EmployeeForm.loadManager(t)})},loadManager:function(n){(n==0||n=="")&&(n="0");$.ajax({type:"GET",url:_spPageContextInfo.webAbsoluteUrl+String(EmployeeForm.LoadManagerUrl)+n+"/"+EmployeeForm.MIN_EMPLOYEE_LEVEL,contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){EmployeeForm.appendDepartmentToSelect(n);$(".se-pre-con").fadeOut(0)},error:function(){$(".se-pre-con").fadeOut(0)}})},appendDepartmentToSelect:function(n){var t=$(EmployeeForm.getControlSelect("EmployeeInfoManager")),i=$(EmployeeForm.getControlSelect("EmployeeInfoDepartment"));t.empty();t.append('<option value="0">'+EmployeeFormResource.None+"<\/option>");n&&n.length>0&&n.forEach(function(n){var i='<option value="'+n.ID+'">'+n.FullName+"<\/option>";t.append(i)},this)}};