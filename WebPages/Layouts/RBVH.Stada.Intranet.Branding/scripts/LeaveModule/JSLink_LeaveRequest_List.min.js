(function(){function t(){SP.SOD.executeOrDelayUntilScriptLoaded(function(){n.Locale=Strings.STS.L_CurrentUICulture_Name;SP.SOD.registerSod(n.ListResourceFileName,"/_layouts/15/ScriptResx.ashx?name="+n.ListResourceFileName+"&culture="+STSHtmlEncode(Strings.STS.L_CurrentUICulture_Name));SP.SOD.executeFunc(n.ListResourceFileName,"Res",i)},"strings.js");$(".leave-request-cancel").click(function(){$(this).attr("disabled","true");var t=$(this).attr("data-id"),n=window.location.protocol+"//{0}/_vti_bin/services/leavemanagement/leavemanagementservice.svc/CancelLeaveManagement/{1}";n=RBVH.Stada.WebPages.Utilities.String.format(n,location.host,t);t&&$.ajax({type:"GET",url:n,contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){n.Code===10&&alert(n.Message);window.location.reload()},error:function(){console.log("Error while cancelling this request")}})})}function i(){$("#leave-request-detail").text(Res.leaveList_ViewDetail);$("#leave-request-requester").text(Res.leaveList_Requester);$("#leave-request-request-for").text(Res.leaveList_RequestFor);$("#leave-request-from").text(Res.leaveList_From);$("#leave-request-to").text(Res.leaveList_To);$("#leave-request-hours").text(Res.leaveList_LeaveHours);$("#leave-request-status").text(Res.leaveList_ApprovalStatus);$("#leave-request-unexpected").text(Res.leaveList_UnexpectedLeave);$("#leave-request-isValid").text(Res.leaveList_IsValidRequest);$("#"+n.Container+" .viewDetail").text(Res.leaveList_ViewDetail);$("#"+n.Container+" .label-success").text(Res.approvalStatus_Approved);$("#"+n.Container+" .label-warning").text(Res.approvalStatus_Cancelled);$("#"+n.Container+" .label-danger").text(Res.approvalStatus_Rejected);$("#"+n.Container+" .leave-request-cancel").text(Res.leaveList_CancelRequest)}function r(n){var l="<td>"+n.CurrentItem.Requester[0].lookupValue+"<\/td>",a="<td>"+n.CurrentItem.RequestFor[0].lookupValue+"<\/td>",v="<td>"+n.CurrentItem.CommonFrom+"<\/td>",y="<td>"+n.CurrentItem.To+"<\/td>",p="<td>"+n.CurrentItem.LeaveHours+"<\/td>",r="",s,t,f,i,h,e,c;n.CurrentItem["UnexpectedLeave.value"]&&n.CurrentItem["UnexpectedLeave.value"]==="1"&&(r="<span class='glyphicon glyphicon-ok leavemanagement-item-ok'>");var r="<td>"+r+"<\/td>",o="",u="";return n.CurrentItem["IsValidRequest.value"]&&n.CurrentItem["IsValidRequest.value"]==="1"?u="<td><span style='margin-left:25%; ' class='glyphicon glyphicon-ok'><\/td>":(u="<td><span style='margin-left:25%;' class='glyphicon glyphicon-remove'><\/td>",o="style='background-color: #fff7e6;'"),s="",t=n.CurrentItem.ApprovalStatus+"",t=t.toLowerCase(),f="",i=window.location.href.split("#")[0],i=Functions.removeParam("lang",i),i+="#tab1",i=encodeURIComponent(i),h='<td><a  href="/SitePages/LeaveRequest.aspx?subSection=LeaveManagement&itemId='+n.CurrentItem.ID+"&Source="+i+'"   class="viewDetail" >View Detail<\/a><\/td>',e="",(n.CurrentItem.Editor[0].id!==n.CurrentItem.Author[0].id||n.CurrentItem.Requester[0].lookupId!=_rbvhContext.EmployeeInfo.ID||n.CurrentItem.Editor[0].id===n.CurrentItem.Author[0].id&&(t==="approved"||t==="cancelled"||t==="rejected"))&&(e="disabled"),c="<td><button type='button' class='btn btn-default btn-sm leave-request-cancel' "+e+" data-id='"+n.CurrentItem.ID+"' "+s+">Cancel Request<\/button><\/td>",f=t=="approved"?'<td><span class="label label-success">Approved<\/span><\/td>':t=="cancelled"?'<td><span class="label label-warning">Cancelled<\/span><\/td>':t=="rejected"?'<td><span class="label label-danger">Rejected<\/span><\/td>':t&&t.length>0?'<td><span class="label label-default statusmultilang">'+n.CurrentItem.ApprovalStatus+"<\/span><\/td>":'<td><span class="label label-default">In-Progress<\/span><\/td>',"<tr "+o+" >"+h+l+a+v+y+p+f+r+u+c+"<\/tr>"}function u(n){return ViewUtilities.Paging.InstanceHtml(n)}var n={LeaveManagement_ViewDetail:"View Detail",LeaveManagement_Requester:"Requester",LeaveManagement_RequestFor:"Request for",LeaveManagement_From:"From",LeaveManagement_To:"To",LeaveManagement_LeaveHours:"Leave hours",LeaveManagement_ApprovalStatus:"Approval status",LeaveManagement_IsValid:"Is Valid",LeaveManagement_UnexpectedLeave:"Unexpected leave",LeaveManagement_ViewTitle:"View",ListResourceFileName:"RBVHStadaLists",PageResourceFileName:"RBVHStadaWebpages",Locale:"",Container:"leave-request-list-container"};(function(){var i={};i.Templates={};i.Templates.Item=r;i.OnPreRender=function(){$(".ms-menutoolbar").hide()};i.ListTemplateType=10004;i.BaseViewID=2;i.OnPostRender=t;i.Templates.Header="<div class='col-md-12'><table class='table'><thead><tr><th id='leave-request-detail'>"+n.LeaveManagement_ViewDetail+"<\/th><th id='leave-request-requester'>"+n.LeaveManagement_Requester+"<\/th><th id='leave-request-request-for'>"+n.LeaveManagement_RequestFor+"<\/th><th id='leave-request-from'>"+n.LeaveManagement_From+"<\/th><th id='leave-request-to'>"+n.LeaveManagement_To+"<\/th><th id='leave-request-hours'>"+n.LeaveManagement_LeaveHours+"<\/th><th id='leave-request-status'>"+n.LeaveManagement_ApprovalStatus+"<\/th><th id='leave-request-unexpected'>"+n.LeaveManagement_UnexpectedLeave+"<\/th><th id='leave-request-isValid'>"+n.LeaveManagement_IsValid+"<\/th><th id='leave-request-action'><\/th><th><\/th><\/tr><\/thead><tbody>";i.Templates.Footer=u;SPClientTemplates.TemplateManager.RegisterTemplateOverrides(i)})()})();