RBVH.Stada.javascript.common.NamespaceManager.register("RBVH.Stada.WebPages.pages");RBVH.Stada.WebPages.pages.SupportingDocument=function(n){this.Settings={DocumentCount:0,DeletedItems:[]};$.extend(!0,this.Settings,n);this.Initialize()};RBVH.Stada.WebPages.pages.SupportingDocument.prototype={Initialize:function(){var n=this;$(document).ready(function(){n.InitControls();n.EventsRegister()})},InitControls:function(){var n=this;$(n.Settings.Controls.GridSupportingDocumentSelector+" .span-delete").toggle($(n.Settings.Controls.AddMoreFileSelector).is(":visible"))},EventsRegister:function(){var n=this;$(document).on("click",n.Settings.Controls.AddMoreFileSelector,function(){n.AppendInputFile()});$(document).on("click",".span-remove",function(){var t=$(this),n=t.attr("id");$("input[name='"+n+"']").remove();$("span[id='"+n+"']").next().remove();$("span[id='"+n+"']").next().remove();$("span[id='"+n+"']").remove()});$(document).on("click",".span-delete",function(){var t=$(this).prev("a").attr("href");n.Settings.DeletedItems.indexOf(t)==-1&&n.Settings.DeletedItems.push(t);$(n.Settings.Controls.hfDeletedItemsSelector).val(JSON.stringify(n.Settings.DeletedItems));$(this).prev("a").remove();$(this).next("br").remove();$(this).remove()})},AppendInputFile:function(){var t=this,n=t.Settings.DocumentCount++;$(t.Settings.Controls.GridSupportingDocumentSelector).append("<input type='file' name='supportingDocument"+n+"' style='display:inline'>  <span id='supportingDocument"+n+"' class='glyphicon glyphicon-trash span-remove'><\/span>  <span spanErrorName='supportingDocument"+n+"' class='ms-formvalidation ms-csrformvalidation'><\/span><br/>")},ValidateAttachments:function(){var r=0,u=this,n=$("input[name^='supportingDocument']"),t,f,i;if($("span[spanErrorName^='supportingDocument']").html(""),n&&n.length>0)for(t=0;t<n.length;t++)f=n[t].value,i=$(n[t]).attr("name"),f&&f!=""?($("span[spanErrorName='"+i+"']").html(""),u.IsValidFileName(f)==!1&&i&&($("span[spanErrorName='"+i+"']").html(u.Settings.Message.InvalidFileName),r++),n[t]&&n[t].files[0]&&n[t].files[0].size==0&&($("span[spanErrorName='"+i+"']").html(u.Settings.Message.FileEmpty),r++)):($("span[spanErrorName='"+i+"']").html(u.Settings.Message.CantLeaveTheBlank),r++);return r==0},IsValidFileName:function(n){return n?!(n.indexOf("#")!==-1):!1}};